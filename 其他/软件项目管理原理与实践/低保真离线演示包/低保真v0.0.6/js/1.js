(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{2333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2348),r=n(2395),i=n(2415),l=n(2334);t.default=function(e){return l.isMobileDevice()?a.createElement(i.default,Object.assign({},e,{childNode:o.default})):a.createElement(i.default,Object.assign({},e,{childNode:r.default}))}},2334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getForcePreviewURL=t.isForcePreview=t.isMobileApp=t.isLarkApplets=t.isLarkBrowser=t.validatePageExist=t.moveStart=t.canScrollInMobile=t.isNeedSyncAnimation=t.getGestureDirection=t.calStyle=t.calculateInteractionSize=t.builderPageStyle=t.calcAutoScale=t.isMobileDevice=t.parseAnimate=t.preloadImage=void 0;var a=n(35),o=n(89),r=n(664),i=n(2339),l=n(42),s=n(655),c=n(657);t.preloadImage=function(e,t,n,r){var i=0,l=[],s=n.filter((function(t){return t.pageID===e}));s&&s.forEach((function(e){var n,s,c,u=e.target;if(u!==o.backLink){var d=a.getPage(t,u);(null==d?void 0:d.isLoaded)||(i+=1,n=d,s=new Image,c=function(){0==(i-=1)&&r(l)},s.src=null==n?void 0:n.imageURL,s.onload=function(){l.push(n._id),c()},s.onerror=function(){c()})}}))},t.parseAnimate=function(e,t){var n={first:"",next:""};if(e){var a=e.animate;if(a){var o=r.animateName[a.animation];if(o){var i=r.animateTypes[o].css;if(i){var l=i.first,s=i.next;l&&"overlay"!==a.action&&(n.first="animate-general "+l),s&&(n.next="animate-general "+s),t&&(n.next="animate-general "+r.animateTypes[t].reverseCss.next)}}}}return n},t.isMobileDevice=function(){return null!==navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i)},t.calcAutoScale=function(e,t,n){var a=1;if(e&&t){var o=t.getBoundingClientRect(),r=e.getBoundingClientRect();if(0!==o.height)a=(o.height-40)/(n?r.width:r.height)*100,a-=a%10,a/=100}return a},t.builderPageStyle=function(e){var n=e.appType,a=e.pageSize,r=e.aniDuration,l=e.landscape,c=e.mobileType,u=e.scale,d=a.width*u,p=a.height,f={animationDuration:r,width:d,overflow:"hidden"};if("web"===n||c===s.MOBILE_TYPE_NONE)return f;if(!t.isMobileDevice()){var h=i.default.getShellInfo(c||o.MobileType.iphoneX,l);if(h)return d=h.defaultScreenSize.width,d*=u,f.width=d,f}if(t.isMobileDevice()){var g=window.orientation;if(d=window.innerWidth,p=window.innerHeight,f.width=d,f.height=p,l)switch(g){case 90:break;default:f.width=p,f.height=d,f.transform="rotate(90deg) translateY(-"+d+"px)",f.transformOrigin="top left"}else switch(g){case 90:f.width=p,f.height=d,f.transform="rotate(90deg) translateY(-"+d+"px)",f.transformOrigin="top left"}}return f},t.calculateInteractionSize=function(e){var n=e.appType,a=e.mobileType,r=e.position,c=e.size,u=e.landscape,d=e.pageSize,p=d,f=e.scale;if(t.isMobileDevice()){var h=window.orientation;p={width:window.innerWidth,height:0},90===h?u||(p.width=window.innerHeight):u&&(p.width=window.innerHeight),f=p.width/d.width,p.height=d.height*f}else if("phone"===n&&a!==s.MOBILE_TYPE_NONE){var g=i.default.getShellInfo(a||o.MobileType.iphoneX,u);if(g)f*=g.defaultScreenSize.width/d.width}var m=l.size.scale(l.size.transToPixed(c,d),f),v=l.point.scale(l.point.transToPixed(r,d),f);return Object.assign({left:v.x,top:v.y},m)};var u=void 0;t.calStyle=function(e,t,n,a){var o={},i={},l="",s="",c=!1;if(t&&e){var d=void 0,p=void 0,f=void 0,h=void 0;u||(u=e);var g=u.animate,m=g.animation,v=g.gesture,w=g.duration;if(!m||!v)return{firstStyle:o,nextStyle:i,firstInitCls:l,nextInitCls:s,skipToNextPage:c};d=m.indexOf("Left")>-1||m.indexOf("Up")>-1||m.indexOf("OutY")>-1||m.indexOf("OutX")>-1?-1:(m.indexOf("Right")>-1||m.indexOf("Down")>-1||m.indexOf("InY")>-1||m.indexOf("InX"),1),v.indexOf("left")>-1||v.indexOf("up")>-1?h=-1:(v.indexOf("right")>-1||v.indexOf("down")>-1)&&(h=1),v.indexOf("left")>-1||v.indexOf("right")>-1?p="deltaX":(v.indexOf("up")>-1||v.indexOf("down")>-1)&&(p="deltaY");var y=r.animateTypes[m].style,b=y.first,P=y.next,S=[];b&&(S=b.split(" "));var E=P.split(" ");m.indexOf("slide")>-1&&(f=!0);var k="firstInit"+m.substring(0,1).toUpperCase()+m.substring(1),I="nextInit"+m.substring(0,1).toUpperCase()+m.substring(1),O="firstLast"+m.substring(0,1).toUpperCase()+m.substring(1),_="nextLast"+m.substring(0,1).toUpperCase()+m.substring(1),L=void 0,T=n[p],x=d*(1-Math.abs(T/a));if(h*T<0&&(x=d),f||(L=-(d-x)),1===S.length?o[S[0]]=1-Math.abs(L):2===S.length&&(o[S[0]]=S[1]+"("+100*L+"%)"),"scale"===S[1]?o[S[0]]=S[1]+"("+(1+L)+")":"rotateY"!==E[1]&&"rotateX"!==E[1]||Math.abs(L)<=.4&&(o[S[0]]=S[1]+"("+216*L+"deg)",i.display="none"),1===E.length?i[E[0]]=1-Math.abs(x):2===S.length&&(i[E[0]]=E[1]+"("+100*x+"%)"),"scale"===E[1]?i[E[0]]=E[1]+"("+(1-x)+")":"rotateY"!==E[1]&&"rotateX"!==E[1]||Math.abs(L)>.4&&(i[E[0]]=E[1]+"("+(144*x-360)+"deg)",o.display="none"),"end"===t)if(Math.abs(d-x)>=.4){var C=w*Math.abs(d-x);o.transition="all "+C+"ms ease",i.transition="all "+C+"ms ease",l=O,s=_,c=!0,setTimeout((function(){u=null}),C)}else l=k,s=I,u=null}return{firstStyle:o,nextStyle:i,firstInitCls:l,nextInitCls:s,skipToNextPage:c}},t.getGestureDirection=function(e){switch(e){case c.SWIPE_UP:case c.SWIPE_DOWN:return s.VERTICAL;case c.SWIPE_LEFT:case c.SWIPE_RIGHT:return s.HORIZONTAL;default:return""}},t.isNeedSyncAnimation=function(e,t){var n=Math.abs(e.deltaX),a=Math.abs(e.deltaY);return t===s.VERTICAL&&n<a||t===s.HORIZONTAL&&n>a},t.canScrollInMobile=function(e,t){return!(e===c.SWIPE_UP&&"goUp"===t||e===c.SWIPE_DOWN&&"goDown"===t||t===s.HORIZONTAL)},t.moveStart=function(e,n,a,o){var r=e.target,i=e.targetTouches,l=void 0,c={},u="",d=!1;i?(l=e.targetTouches[0],c={move:"touchmove",end:"touchend"}):(l=e,r=window,c={move:"mousemove",end:"mouseup"});var p=l.pageX,f=l.pageY,h={deltaX:0,deltaY:0},g=function(e){var o=l=i?e.targetTouches[0]:e,r=o.pageX,c=o.pageY;h={deltaX:r-p,deltaY:c-f},u||(h.deltaY<0?u="goUp":h.deltaY>0&&(u="goDown"),Math.abs(h.deltaX)>Math.abs(h.deltaY)&&(u=s.HORIZONTAL)),t.canScrollInMobile(n,u)||e.preventDefault(),t.isNeedSyncAnimation(h,t.getGestureDirection(n))&&!t.canScrollInMobile(n,u)&&(d=!0,a(h))};r.addEventListener(c.move,g),r.addEventListener(c.end,(function e(){d&&o(h),r.removeEventListener(c.move,g),r.removeEventListener(c.end,e)}))},t.validatePageExist=function(e,t){return!!a.getFlattenPages(e).find((function(e){return e.source===o.interactionTypes.sketch||e.source===o.interactionTypes.xd?e._id===t||e.clientID===t:e._id===t}))},t.isLarkBrowser=-1!==navigator.userAgent.indexOf("Lark")&&-1===window.location.href.indexOf("lark=true"),t.isLarkApplets=-1!==window.location.href.indexOf("lark=true"),t.isMobileApp=-1!==window.location.href.indexOf("phoneUrl=true"),t.isForcePreview=-1!==window.location.href.indexOf("force=1"),t.getForcePreviewURL=function(){var e=window.location.href;return-1===e.indexOf("?")?e+"?force=1":e+"&force=1"}},2335:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.default=a.createContext({})},2337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(8);n(2373);var r=a.memo((function(e){var t=e.propsRef,n=e.isPageLoadAll,r=(e.clientID,e.dynamicCreate),i=e.pageID,l=e.refIndex,s=void 0===l?0:l;if(a.useEffect((function(){var t,n,a=document.querySelectorAll("#axure-page")[s],o=document.querySelectorAll("#axure-iframe-wrapper")[s];if(a&&r){a.setAttribute("src","about:blank");try{a.contentWindow.document.write(""),a.contentWindow.document.clear()}catch(e){console.log(e)}null===(t=null==a?void 0:a.parentNode)||void 0===t||t.removeChild(a),null===(n=null==o?void 0:o.parentNode)||void 0===n||n.removeChild(o)}if(r){var l=document.querySelectorAll("#special-page-"+i)[s];if(!l)return;var c=document.createElement("iframe");c.setAttribute("id","axure-page"),c.setAttribute("class","axure-page"),c.setAttribute("loading","lazy"),c.setAttribute("src",""+(e.adjustBodyPosition?e.dataURL+"?fromIDocApp=1":d)),c.style.pointerEvents=e.preventEvents?"none":"unset",l&&l.appendChild(c)}}),[e.dataURL]||!1),!e.dataURL)return null;var c,u=e.view?"&view="+e.view:"",d=e.dataURL;if(e.isPreviewPage&&((c=e.sourceInfo)&&("idoc-for-web"===c.clientName||"idoc-for-axure"===c.clientName&&!c.clientVersion.startsWith("1.0")))){var p=e.dataURL.substr(0,e.dataURL.lastIndexOf("/")),f=e.dataURL.substr(e.dataURL.lastIndexOf("/")+1).replace(".html",""),h=window["__axure_page_rnd__"+e.clientID]+Math.random().toString();window["__axure_page_rnd__"+e.clientID]=h,d=p+"/start.html?fromIDocAppPreview=1&rnd="+h+"#id="+e.clientID+"&p="+f+"&g=1&fn=1&hi=1&c=1"+u}var g=function(){e.onLoad&&e.onLoad(e.adjustBodyPosition?e.dataURL+"?fromIDocApp=1":d)};return r?void 0:a.createElement("iframe",{id:"axure-page",className:o.default("axure-page",void 0!==n&&!n&&"page-loading"),src:e.adjustBodyPosition?e.dataURL+"?fromIDocApp=1":d,ref:t,loading:"lazy",onLoad:g,onError:g,style:{pointerEvents:e.preventEvents?"none":"unset"}})}));t.default=r},2338:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(2349),i=n(2383),l=n(2335),s=n(2334),c=n(42),u=n(89),d=n(52),p=n(658);n(2386);var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.parseInteractions=function(){var e=n.props,t=e.interactions,a=e.firstPage,o=[],r=[],i=[];if(a&&t){var l=a.clipArea,s=a.size,u=l.top,d=l.bottom,p=u*s.height,f=d*s.height,h={x:0,y:0,width:s.width,height:p},g={x:0,y:p,width:s.width,height:s.height-p-f},m={x:0,y:s.height-f,width:s.width,height:f};t.forEach((function(e){var t=c.size.transToPixed(e.size,s),n=c.point.transToPixed(e.position,s),a=c.rect.init(n,t);c.rect.contains(h,a)&&o.push(e),c.rect.intersectRect(g,a)&&i.push(Object.assign(Object.assign({},e),{position:Object.assign(Object.assign({},e.position),{y:e.position.y-u})})),c.rect.intersectRect(m,a)&&r.push(Object.assign(Object.assign({},e),{position:Object.assign(Object.assign({},e.position),{y:e.position.y+d-1})}))}))}return{top:o,center:i,bottom:r}},n.renderInteractions=function(e,t){if(!e||0===e.length)return null;var a=n.props,r=a.firstPage,l=a.scale,s=a.options,c=a.isFadeIn,u=a.appType,d=a.onLinkFadeInEnd,p=a.onLinkClick,f=a.nextPage,h=a.onLinkPan,g=a.onLinkPanDone,m=a.panState,v=a.overlayPage,w=n.state.showInteractions;return!s||!e||!r||f&&!m||t||w?null:o.createElement(i.default,{interactions:e,appType:u,scale:l,fadeIn:c,page:r,options:s,onInteractionClick:p,onInteractionPan:h,onInteractionPanDone:g,onFadeInEnd:d,overlayPage:v})},n.state={showInteractions:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(){this.setState({showInteractions:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.firstPage,a=t.nextPage,i=t.overlayPage,l=t.appType,c=t.scale,u=t.onAnimationEnd,f=t.options,h=t.overlayAnimation,g=t.panState,m=t.delta,v=t.onTransitionEnd,w=t.type,y=t.shareID;if(!n)return null;if(d.isRpApp(w)){var b="/run/rp/"+y+"/"+n._id+window.location.search;return p.isInIframe()&&(b+="?embeded=1"),o.createElement("iframe",{className:"fragment-rp",src:b})}var P=null==f?void 0:f.mobileType,S=a;i&&(S=i);var E=s.parseAnimate(S,h),k=E.first,I=E.next,O=(S?S.animate:{animation:"",duration:0,noStyle:!1})||{animation:"none",duration:0,noStyle:!1},_=O.animation,L=O.duration,T=O.noStyle,x=("none"===_?1:L||0)+"ms",C=n.size,A=n.landscape,D=C,N=s.builderPageStyle({appType:l,pageSize:D,aniDuration:x,landscape:A,mobileType:P,scale:c}),M=N.width,j=this.parseInteractions();(g&&!i||!h&&T)&&(k="",I="");var R=s.calStyle(a,g,m,M),U=R.firstStyle,z=R.nextStyle,H=R.firstInitCls,W=R.nextInitCls,F=R.skipToNextPage;return o.createElement("div",{className:"page-fragment-content"},o.createElement(r.default,{style:Object.assign(Object.assign({},N),U),className:["first-page",k,H],key:"first_"+(n&&n._id),page:n,topChildren:this.renderInteractions(j.top,i),centerChildren:this.renderInteractions(j.center,i),bottomChildren:this.renderInteractions(j.bottom,i)}),o.createElement(r.default,{className:["next-page",I,W],key:"next_"+(a&&a._id),style:Object.assign({animationDuration:x,overflow:"hidden",width:M},z),page:a,onAnimationEnd:u,onTransitionEnd:function(){v(F)}}),o.createElement(r.default,{className:["overlay-page",I],key:"overlay_"+(i&&i._id),isOverlay:!!i,style:{animationDuration:x,overflow:"hidden",width:M},page:i,onAnimationEnd:function(t){t.stopPropagation(),e.setState({showInteractions:!1})},topChildren:this.renderInteractions(j.top),centerChildren:this.renderInteractions(j.center),bottomChildren:this.renderInteractions(j.bottom)}))}}]),t}(o.Component);f.defaultProps={isFadeIn:!0,appType:"phone",scale:1,nextPage:null,firstPage:null,overlayPage:null,interactions:[],onLinkClick:null,onLinkFadeInEnd:null,onAnimationEnd:null,overlayAnimation:"",onLinkPan:null,onLinkPanDone:null,panState:"",delta:null,onTransitionEnd:null,options:{alwaysShowLinkArea:!1,mobileType:u.MobileType.iphoneX,showControllerPanel:!0,showLinkAreaWhenHovered:!0,showToolbar:!0,autoScreen:!1}},t.default=function(e){return o.createElement(l.default.Consumer,null,(function(t){var n=t.onAnimationEnd,a=t.onTransitionEnd,r=t.onLinkClick,i=t.onLinkFadeInEnd,l=t.onLinkPan,s=t.onLinkPanDone;return o.createElement(f,Object.assign({},e,{onAnimationEnd:n,onTransitionEnd:a,onLinkClick:r,onLinkFadeInEnd:i,onLinkPan:l,onLinkPanDone:s}))}))}},2339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(89),r=f(n(2350)),i=f(n(2351)),l=f(n(2352)),s=f(n(2353)),c=f(n(2354)),u=f(n(2355)),d=f(n(2356)),p=f(n(2357));function f(e){return e&&e.__esModule?e:{default:e}}var h={},g=function(e){var t=e.width;return{width:e.height,height:t}},m=function(e){var t=e.defaultScreenSize,n=e.shellSize,a=e.screenBounds,o=a.left,r=a.top,i=a.width,l=a.height;return{defaultScreenSize:g(t),shellSize:g(n),screenBounds:{left:r,width:l,height:i,top:n.width-o-i}}};h[o.MobileType.iphoneX]={defaultScreenSize:{width:375,height:812},shellImage:{landscape:i.default,portrait:r.default},shellSize:{width:1295,height:2590},screenBounds:{left:83,top:77,width:1125,height:2436}},h[o.MobileType.iphone]={defaultScreenSize:{width:375,height:667},shellImage:{landscape:s.default,portrait:l.default},shellSize:{width:871,height:1776},screenBounds:{left:61,top:219,width:750,height:1334}},h[o.MobileType.android]={defaultScreenSize:{width:360,height:640},shellImage:{landscape:u.default,portrait:c.default},shellSize:{width:1204,height:2458},screenBounds:{left:62,top:252,width:1080,height:1920}},h[o.MobileType.pad]={defaultScreenSize:{width:768,height:1024},shellImage:{landscape:p.default,portrait:d.default},shellSize:{width:1762,height:2496},screenBounds:{left:112,top:225,width:1537,height:2049}},t.default={getShellInfo:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=h[e];if(n){var o=a({},h[e]);if(o){var r=o,i=r.shellImage;t&&(o=m(o));var l=o,s=l.defaultScreenSize,c=l.shellSize,u=l.screenBounds;return{defaultScreenSize:s,shellSize:c,screenBounds:u,shellImage:t?i.landscape:i.portrait}}}return null}}},2343:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(2387),l=n(44);n(2388);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setNeedScroll=function(){n.setState({needScroll:!1})},n.getParentIDs=function(e,t,a){if(!(null==e?void 0:e.parentID))return a;var o=l.findNode(t,e.parentID);return a.push(e.parentID),n.getParentIDs(o,t,a)},n.doExpandNode=function(e,t){if(!e||0===e.length)return null;var a=e.filter((function(e){return!n.props.searchKey||l.isNodeOrChildrenMatch(e,n.props.searchKey)}));return 0===a.length?null:a.map((function(e){var a=Object.assign(Object.assign({},e),{expand:!0});return(a=t&&t.length?Object.assign(Object.assign({},e),{expand:t.includes(e._id)||(null==e?void 0:e.expand)}):t&&!t.length?Object.assign(Object.assign({},e),{expand:!1}):Object.assign(Object.assign({},e),{expand:null==e?void 0:e.expand})).children&&a.children.length&&(a.children=n.doExpandNode(a.children,t)),a}))},n.initTreeExpand=function(){var e=l.findNode(n.props.data,n.props.selectedID),t=n.getParentIDs(e,n.props.data,[]),a=n.doExpandNode(n.props.data,t);n.setState({data:a,needExpandIDArr:t})},n.getAllNode=function(e){var t=[];return null==e||e.forEach((function(e){if(t.push(e._id),e.children){var a=n.getAllNode(e.children);t=[].concat(o(t),o(a))}})),t},n.handleNodeExpandChange=function(e,t){var a=n.props.canExpand,r=n.state.data;if(a)if(t){if(!!(null==r?void 0:r.filter((function(e){return!!e.expand})).length)){var i=n.doExpandNode(r,[]);n.setState({data:i,needExpandIDArr:[]})}else{var l=n.doExpandNode(r,n.getAllNode(r));n.setState({data:l,needExpandIDArr:n.getAllNode(r)})}}else{var s=e;s.expand=!s.expand;var c=[].concat(o(r));n.setState({data:c})}},n.handleNodeSelected=function(e){if(e._id&&!e.isGroup){var t=n.props.onPageSelected;t&&t(e._id)}},n.renderLinks=function(){var e=n.props.links;return e?r.createElement("div",{className:"links-container"},e.map((function(e){return r.createElement("div",{className:"tree-node"},r.createElement("div",{className:"tree-node-title link drop-down-list-item",onClick:function(t){t.stopPropagation(),n.handleNodeSelected(e)}},r.createElement("span",null,e.name)))}))):null},n.state={data:[],needExpandIDArr:[],needScroll:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.initTreeExpand()}},{key:"componentDidUpdate",value:function(e){if(e.data.length!==this.props.data.length||e.searchKey!==this.props.searchKey){var t=this.doExpandNode(this.props.data);this.setState({data:t})}if(e.selectedID!==this.props.selectedID){var n=l.findNode(this.props.data,this.props.selectedID),a=this.getParentIDs(n,this.props.data,[]),o=this.doExpandNode(this.state.data,a);this.setState({data:o,needExpandIDArr:a,needScroll:!0})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedID,a=t.cls,o=t.downArrowShow,l=t.treeRef,s=t.isDropDownList,c=this.state,u=c.data,d=c.needScroll;return r.createElement("div",{className:"preview-tree-wrap "+a,ref:l},this.renderLinks(),u&&u.map((function(t){return r.createElement(i.default,{key:t._id,isDropDownList:s,page:t,downArrowShow:o,selID:n,needScroll:d,setNeedScroll:e.setNeedScroll,onExpand:e.handleNodeExpandChange,onSelected:e.handleNodeSelected})})))}}]),t}(r.Component);s.defaultProps={selectedID:"",onPageSelected:null,canExpand:!0,cls:"",downArrowShow:!0},t.default=s},2344:function(e,t,n){},2345:function(e,t,n){e.exports=n.p+"assets/default-img.265ce72e45b558b6c865fd3dcce678f6.png"},2347:function(e,t,n){e.exports=n.p+"assets/no_search_result.111d843603d33e4a2781273c878d914e.png"},2348:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(99),i=n(8),l=n(2338),s=n(2343),c=n(2389),u=n(48),d=n(168),p=n(52),f=n(2334),h=n(18),g=n(2337),m=n(2392),v=n(2393),w=n(659);n(2394);var y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleWindowTouchStart=function(){(0,n.props.onLinkAreaFadeInStart)()},n.handleToggleTree=function(){var e=n.state.showTree;n.setState({showTree:!e})},n.handleBallTouchStart=function(e){e.stopPropagation();var t=e.target,a=n.state.ballPoint,o=e.nativeEvent.targetTouches[0],r=o.pageX,i=o.pageY;n.setState({active:!0});var l=function(e){e.stopPropagation(),e.preventDefault();var t=e.targetTouches[0],o=t.pageX,l=t.pageY,s=o-r,c=l-i,u={right:a.right-s,bottom:a.bottom-c};n.setState({ballPoint:u})};t.addEventListener("touchmove",l),t.addEventListener("touchend",(function e(){var a=n.state.ballPoint,o=window.innerWidth-70,r=window.innerHeight-70,i=a.right>0,s=Object.assign({},a);a.right<=17.5&&(s.right=-35),a.right>o&&(s.right=o),a.bottom<0&&(s.bottom=0),a.bottom>r&&(s.bottom=r),n.setState({active:i,ballPoint:s}),t.removeEventListener("touchmove",l),t.removeEventListener("touchend",e)}))},n.state={showTree:!1,ballPoint:{right:-35,bottom:70},active:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){window.addEventListener("touchstart",this.handleWindowTouchStart)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchstart",this.handleWindowTouchStart)}},{key:"render",value:function(){var e=this.props,t=e.currentPage,n=e.loaded,a=e.app,l=e.onPageSelected,d=e.needPerspective,g=e.onMobileToggleTree,y=e.onMobileTouchStart,b=e.onMobileTouchMove,P=e.onMobileTouchEnd,S=e.showPhoneTree,E=this.state,k=E.active,I=E.ballPoint,O=E.showTree,_=n?a.children:null;if(!n)return o.createElement(w.default,null);if(!f.isMobileApp&&!f.isLarkBrowser){if(h.isiOS&&h.isWeChat&&!f.isForcePreview)return o.createElement(m.default,{name:a.name,icon:a.icon});if(h.isiOS&&h.isSafari&&!f.isForcePreview&&!h.isSafariStandalone)return o.createElement(v.default,{name:a.name,icon:a.icon})}return o.createElement("div",{className:i.default("mobile-container",{perspective:d,childIsIframe:p.isSpecialApp(a.type)}),onTouchStart:y,onTouchMove:b,onTouchEnd:P},this.renderPageContent(),f.isMobileApp||f.isLarkBrowser?o.createElement("div",{className:i.default("tree-panel",{show:S,hide:!S}),onClick:g},_&&o.createElement(c.default,{data:_,homePageId:a.homepage,groupCount:a.groupCount,pageCount:a.pageCount,name:a.name,selectedID:t?t._id:null,onPageSelected:l})):o.createElement("div",{className:i.default("tree-panel",{show:O,hide:!O}),onClick:this.handleToggleTree},_&&o.createElement(s.default,{data:_,selectedID:t?t._id:null,onPageSelected:l})),!f.isMobileApp&&!f.isLarkBrowser&&r.createPortal(o.createElement("div",{style:I,className:i.default("controller-ball",{active:k}),onClick:this.handleToggleTree,onTouchStart:this.handleBallTouchStart},o.createElement(u.Icon,{cls:"demo_control",size:"3.6rem"})),document.body))}},{key:"renderPageContent",value:function(){var e=this.props,t=e.interactions,n=e.currentPage,a=e.nextPage,r=e.linkFadeIn,i=e.overlayPage,s=e.overlayAnimation,c=e.preview,u=e.app;return n?p.isAxureApp(u.type)?o.createElement(g.default,{isPreviewPage:!0,clientID:n.clientID,sourceInfo:n.sourceInfo,dataURL:n.dataURL,preventEvents:!1,adjustBodyPosition:!1,dynamicCreate:!1}):o.createElement(l.default,{appType:d.AppType.phone,interactions:t,firstPage:n,nextPage:a,overlayPage:i,isFadeIn:r,panState:c.panState,delta:c.delta,overlayAnimation:s,type:u.type,shareID:u.shareID}):null}}]),t}(o.Component);y.defaultProps={app:null,interactions:null,currentPage:null,nextPage:null,overlayPage:null,loaded:!1,linkFadeIn:!0,onLinkAreaFadeInStart:null,onPageSelected:null,needPerspective:!1,overlayAnimation:"",preview:null},t.default=y},2349:function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(48),l=n(655),s=n(2335),c=n(2334),u=n(2358);n(2382);var d=n(90),p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pageDiv=r.createRef(),n.onMoveStart=function(e){var t=n.props,a=t.page,o=t.onPagePan,r=t.onPagePanDone,i=t.isOverlay,l=a.onLoaded.gesture,s=!l||-1===l.indexOf("swipe")||i||-1!==e.target.className.indexOf("link-hot");c.moveStart(e,l,(function(e){s||o(e)}),(function(e){s||r(e)}))},n.setTimming=function(e){n.isTiming=e},n.handlePageGesture=function(e,t,a){e&&!n.isTiming?(n.setTimming(!0),setTimeout((function(){n.setTimming(!1),a(t.type)}),e)):n.isTiming||a(t.type)},n.isTiming=!1,n.handleOnScroll=n.handleOnScroll.bind(n),n.state={scrollLeft:0,scrollTop:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;if(this.pageDiv.current){var t=new Hammer(this.pageDiv.current),n=this.props,a=n.onPageGesture,o=n.page,r=n.isOverlay,i=n.pageWhetherExist,s=o.onLoaded,u=s.delay,d=s.target,p=s.gesture;if(i(d)&&(t.get("swipe").set({velocity:.1}),p)){if("doubleClick"===p)return void t.on("tap",(function(t){-1===t.target.className.indexOf("link-hot")&&2===t.tapCount&&e.handlePageGesture(u,t,a)}));var f=p;p.indexOf("swipe")>-1&&(c.getGestureDirection(p)===l.VERTICAL&&t.get("swipe").set({direction:Hammer.DIRECTION_ALL}),r||(p="pan")),t.on(""+p,(function(t){-1===t.target.className.indexOf("link-hot")&&f===p&&e.handlePageGesture(u,t,a)}))}}}},{key:"componentDidUpdate",value:function(e){var t=this.props.page;!this.scrollNode||e.page&&t._id===e.page._id||(this.scrollNode.scrollTop(0),this.scrollNode.scrollLeft(0))}},{key:"handleOnScroll",value:function(){this.scrollNode&&this.setState({scrollTop:this.scrollNode.getScrollTop(),scrollLeft:this.scrollNode.getScrollLeft()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,o=t.className,l=t.onAnimationEnd,s=t.topChildren,c=t.bottomChildren,p=t.centerChildren,f=t.onTransitionEnd;if(n){var h=this.props.style||{},g=["preview-page"];if(o)if(Array.isArray(o))g=g.concat(o);else if("string"==typeof o)g.push(o);else if("object"===(void 0===o?"undefined":a(o))){Object.keys(o).forEach((function(e){g.push(o[e])}))}var m=h.width,v=n.clipArea,w=n.size,y=(v?v.top:0)*w.height,b=(v?v.bottom:0)*w.height,P=w.height-y-b,S=m?m/w.width:1,E=Math.round(y*S),k=Math.round(b*S),I=Math.round(P*S),O=this.centerDiv?this.centerDiv.getBoundingClientRect().height:0;return r.createElement("div",{onAnimationEnd:l,onTransitionEnd:f,style:Object.assign({},h),onTouchStart:this.onMoveStart,onMouseDown:this.onMoveStart,className:g.join(" "),ref:this.pageDiv},E>0&&r.createElement("div",{className:"page-fragment top-fragment",style:{width:m,height:E}},r.createElement(u.default,{page:n,zoom:S,scale:S,containerHeight:E,containerWidth:m,scrollLeft:0,scrollTop:0,mode:d.AppWorkMode.Preview,viewPortRect:{left:0,top:0,right:m,bottom:E}},s)),r.createElement("div",{ref:function(t){e.centerDiv=t},className:"page-fragment center-fragment",style:{flex:1}},r.createElement(i.ScrollView,{setRef:function(t){e.scrollNode=t},onScroll:this.handleOnScroll},r.createElement("div",{className:"center-content",style:{width:Math.round(m),height:I}},r.createElement(u.default,{page:n,zoom:S,scale:S,containerHeight:I,containerWidth:m,scrollLeft:0,scrollTop:0,style:{top:-E},mode:d.AppWorkMode.Preview,viewPortRect:{left:0,top:E+this.state.scrollTop,right:m,bottom:E+this.state.scrollTop+O},isPreviewPage:!0},p)))),k>0&&r.createElement("div",{className:"page-fragment bottom-fragment",style:{width:m,height:k}},r.createElement(u.default,{page:n,zoom:S,scale:S,containerHeight:k,containerWidth:m,scrollLeft:0,scrollTop:0,isPreviewPage:!0,mode:d.AppWorkMode.Preview,viewPortRect:{left:0,top:E+I,right:m,bottom:E+I+k}},c)))}return null}}]),t}(r.Component);p.defaultProps={page:null,className:null,style:null,onAnimationEnd:null,topChildren:null,bottomChildren:null,centerChildren:null,onPageGesture:null,onTransitionEnd:null,onPagePan:null,onPagePanDone:null,isOverlay:!1,pageWhetherExist:null},t.default=function(e){return r.createElement(s.default.Consumer,null,(function(t){var n=t.onPagePan,a=t.onPagePanDone,o=t.onPageGesture,i=t.pageWhetherExist;return r.createElement(p,Object.assign({},e,{onPagePan:n,onPagePanDone:a,onPageGesture:o,pageWhetherExist:i}))}))}},2350:function(e,t,n){e.exports=n.p+"assets/portrait.6514b444ebe12079ec3dd87d2efee053.svg"},2351:function(e,t,n){e.exports=n.p+"assets/landscape.c8cf046c8e2b3b0410b47f231d0f360e.svg"},2352:function(e,t,n){e.exports=n.p+"assets/portrait.59106740603c792b974222a6cd620281.svg"},2353:function(e,t,n){e.exports=n.p+"assets/landscape.1a2b24c1b41eeab9ed45c4947b226efe.svg"},2354:function(e,t,n){e.exports=n.p+"assets/portrait.8215e32006c73f788deccc6f7a4134c0.svg"},2355:function(e,t,n){e.exports=n.p+"assets/landscape.50f07a476ff9a0e497e9f21ce058e956.svg"},2356:function(e,t,n){e.exports=n.p+"assets/portrait.1a9c2072c2297def494faaf12745a26a.svg"},2357:function(e,t,n){e.exports=n.p+"assets/landscape.2e29853204bdea1d486c9d23dc8fd323.svg"},2358:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(26),r=n(2359),i=n(2337),l=n(2374),s=n(2376);n(2381);var c=/http\:\/\/mockplus-static\.oss-cn-hangzhou\.aliyuncs\.com\//gi,u=function(e){var t=e.page,n=e.zoom,u=e.children,d=e.containerHeight,p=e.containerWidth,f=e.scrollTop,h=e.scrollLeft,g=e.isPreviewPage,m=e.style,v=e.scale,w=e.mode,y=e.isPageLoadAll,b=e.iframeLoadingPageIds,P=e.iframeWillLoadingPageIds,S=e.refIndex,E=void 0===S?0:S,k=e.onLoaded,I=e.onPatchPage,O=document.getElementById("axure-page"),_=document.getElementById("special-page-"+t._id);a.useEffect((function(){if(t.displaySize&&t.size){var e=t.displaySize,a=e.width,o=e.height,r=t.size,i=r.width,l=r.height;_&&(a>0&&a>=i*n&&(_.style.width=a/n+"px"),o>0&&o>=l*n&&(_.style.height=o/n+"px")),O&&(a>0&&a>=i*n&&(O.style.width=a/n+"px"),o>0&&o>=l*n&&(O.style.height=o/n+"px"))}if(!t.displaySize&&t.size){var s=t.size,c=s.width,u=s.height;_&&(_.style.width=c+"px",_.style.height=u+"px")}}),[t.displaySize,_]);var L,T,x,C=function(e){if(e.persist(),_){var t=e.clientX||e.pageX,n=e.clientY||e.pageY,a=_.getBoundingClientRect(),o={preX:t,preY:n,w:a.width,h:a.height};localStorage.setItem("cache_axure_page_mouse_down","true"),localStorage.setItem("cache_axure_page_position_info",JSON.stringify(o)),document.addEventListener("mousemove",D),document.addEventListener("mouseup",A)}},A=function e(){if(_&&I){var t=_.getBoundingClientRect(),n=t.width,a=t.height;I({displaySize:{width:Number(n.toFixed(0)),height:Number(a.toFixed(0))}})}localStorage.removeItem("cache_axure_page_mouse_down"),localStorage.removeItem("cache_axure_page_move_right"),localStorage.removeItem("cache_axure_page_move_bottom"),localStorage.removeItem("cache_axure_page_position_info"),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",e)},D=function(e){var a=localStorage.getItem("cache_axure_page_mouse_down"),o=localStorage.getItem("cache_axure_page_move_right"),r=localStorage.getItem("cache_axure_page_move_bottom"),i=localStorage.getItem("cache_axure_page_position_info"),l=document.querySelector(".assist-bottom-line"),s=document.querySelector(".assist-right-line");if(_&&a&&i){var c=JSON.parse(i),u=c.preX,d=c.preY,p=c.w,f=c.h,h=(e.clientX||e.pageX)-u,g=(e.clientY||e.pageY)-d,m=Math.round(t.size.width*n),v=Math.round(t.size.height*n);null!==o&&(_.style.width="true"===o?Math.max(m,p+h)/n+"px":Math.max(m,p-h)/n+"px",O&&(O.style.width="true"===o?Math.max(m,p+h)/n+"px":Math.max(m,p-h)/n+"px"),l&&(l.style.width="100%")),null!==r&&(_.style.height="true"===r?Math.max(v,f+g)/n+"px":Math.max(v,f-g)/n+"px",O&&(O.style.height="true"===r?Math.max(v,f+g)/n+"px":Math.max(v,f-g)/n+"px"),s&&(s.style.height="100%"))}},N={width:Math.round(t.size.width*n),height:Math.round(t.size.height*n),background:g?"transparent":"#fff"};if("axure"===t.type)return a.createElement("div",{className:"common-page",id:"page_"+t._id,style:N},a.createElement("div",{id:"special-page-"+t._id,className:"special-page-wrapper",style:{width:t.size.width,height:t.size.height,transform:"scale("+n+")",transformOrigin:"top left"}},a.createElement(i.default,(L={isPreviewPage:g,clientID:t.clientID,sourceInfo:t.sourceInfo,dataURL:t.dataURL,refIndex:E,preventEvents:!0,adjustBodyPosition:!0,page:t,zoom:n,pageID:t._id,onLoad:function(){k&&k(t._id)},isPageLoadAll:y,dynamicCreate:!0},x=E,(T="refIndex")in L?Object.defineProperty(L,T,{value:x,enumerable:!0,configurable:!0,writable:!0}):L[T]=x,L)),a.createElement("div",{className:"assist-right-line",style:{transform:"scaleX("+(n<1?1/n:n)+")"},onMouseDown:function(e){localStorage.setItem("cache_axure_page_move_right","true"),localStorage.removeItem("cache_axure_page_move_bottom"),C(e)},onMouseEnter:function(){},onMouseLeave:function(){}}),a.createElement("div",{className:"assist-bottom-line",style:{transform:"scaleY("+(n<1?1/n:n)+")"},onMouseDown:function(e){localStorage.setItem("cache_axure_page_move_bottom","true"),localStorage.removeItem("cache_axure_page_move_right"),C(e)},onMouseEnter:function(){},onMouseLeave:function(){}}),a.createElement("div",{className:"assist-right-bottom-corner",style:{transform:"scale("+(n<1?1/n:n)+")"},onMouseDown:function(e){e.stopPropagation(),localStorage.setItem("cache_axure_page_move_right","true"),localStorage.setItem("cache_axure_page_move_bottom","true"),C(e)}})),u);if("mockplus"===t.type)return a.createElement("div",{className:"common-mk-page",id:"page_"+t._id,style:N},a.createElement("div",{className:"special-page-wrapper",style:{width:t.size.width,height:t.size.height,transform:"scale("+e.zoom+")",transformOrigin:"top left"}},a.createElement(s.default,{ID:t._id,page:t,scale:e.zoom,isInApp:e.isInApp,onLoad:function(){k&&k(t._id)},isPageLoadAll:y})),u);if("rp"===t.type||"fragment"===t.type){var M=t.imageCreatedAt,j=t.imageURL,R=t.updatedAt;if(!j||!M||!R||new Date(R).getFullYear()<2e3||new Date(M).getTime()<=new Date(R).getTime()+3e4)return a.createElement("div",{className:"common-page",id:"page_"+t._id,style:N},a.createElement("div",{className:"special-page-wrapper",style:{width:t.size.width,height:t.size.height,transform:"scale("+e.zoom+")",transformOrigin:"top left"}},(o.isSinglePage(w)||g||!(null==P?void 0:P.length)||b&&(null==b?void 0:b.includes(t._id))||P&&!(null==P?void 0:P.includes(t._id)))&&a.createElement(l.default,{dataURL:t.dataURL,preventEvents:!0,onLoad:function(){k&&k(t._id)},isPageLoadAll:y})),u)}return a.createElement(a.Fragment,null,a.createElement("div",{className:"common-page",id:"page_"+t._id,style:Object.assign({},N,m)},a.createElement(r.default,{imageURL:t.imageURL.replace(c,"https://img02.mockplus.cn/"),containerHeight:d,containerWidth:p,scrollLeft:h,scrollTop:f,zoom:n,scale:v,isCutted:t.isCutted,parts:t.parts,size:t.size,page:t,mode:w,viewPortRect:e.viewPortRect,viewSize:N,onImageLoaded:function(){k&&k(t._id)},isPageLoadAll:y}),!g&&u),g&&u)};u.defaultProps={isInApp:!0,isPreviewPage:!1,style:{}},t.default=u},2359:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(2336),i=n(2368),l=n(2369),s=n(656),c=n(26),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.zoom;return n.state={isShowHugePage:s.ifShowHugePage(a),imageLoaded:!1},n.debounceGetShow=r(n.getShowHugepage,500),n.onImageLoaded=n.onImageLoaded.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.zoom;t!==e.zoom&&this.debounceGetShow(t)}},{key:"getShowHugepage",value:function(e){this.setState({isShowHugePage:s.ifShowHugePage(e)})}},{key:"onImageLoaded",value:function(e){this.setState({imageLoaded:e});var t=this.props,n=t.onImageLoaded,a=t.imageURL;n&&n(a)}},{key:"render",value:function(){var e=this.props,t=e.isCutted,n=e.imageURL,a=e.zoom,r=e.size,s=e.scale,u=e.page,d=e.mode,p=e.viewSize,f=e.viewPortRect,h=e.isPageLoadAll,g=this.state,m=g.isShowHugePage,v=g.imageLoaded,w=!c.loadOriginImageMode(d);if(t&&u.parts&&u.parts.length>0){var y=m||!m&&!v;return o.createElement("div",null,o.createElement("div",{style:{display:y?"block":"none"}},o.createElement(l.default,{page:u,zoom:a,scale:s,mode:d,viewPortRect:f,isPageLoadAll:h})),o.createElement("div",{style:{display:y?"none":"block"}},o.createElement(i.default,{key:n,imageURL:n,zoom:a,viewSize:p,isBigImg:r.width>1e4||r.height>1e4,canLoadThumb:w,onImageLoaded:this.onImageLoaded,isPageLoadAll:h})))}return o.createElement(i.default,{key:n,imageURL:n,zoom:a,viewSize:p,isBigImg:r.width>1e4||r.height>1e4,canLoadThumb:w,onImageLoaded:this.onImageLoaded,isPageLoadAll:h})}}]),t}(o.Component);u.defaultProps={isCutted:!1},t.default=u},2368:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(8),i=n(120),l=n(30),s=n(2336),c=function(e,t,n){return n?i.getStyledImage(e,"!thumb-p-25"):u(e,t)},u=function(e,t){if(l.getDevicePixelRatio()>1){if(t<.25)return i.getStyledImage(e,"!thumb-p-50")}else{if(t<.25)return i.getStyledImage(e,"!thumb-p-25");if(t<.5)return i.getStyledImage(e,"!thumb-p-50")}return e},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTargetImageLoaded=function(){n.setState({showTargetImage:!0}),n.props.onImageLoaded(!0)},e.canLoadThumb?n.state={showTargetImage:!1,targetImageURL:c(e.imageURL,e.zoom,e.isBigImg)}:n.state={showTargetImage:!0,targetImageURL:e.imageURL},n.debouncedLoadNewImage=s(n.loadNewImage,500),n.onTargetImageLoaded=n.onTargetImageLoaded.bind(n),n.renderSVG=n.renderSVG.bind(n),n.renderImage=n.renderImage.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidUpdate",value:function(e,t){e.imageURL!==this.props.imageURL?this.loadNewImage():this.debouncedLoadNewImage()}},{key:"loadNewImage",value:function(){var e=this.props,t=e.imageURL,n=e.zoom,a=e.canLoadThumb,o=e.isBigImg,r=e.onImageLoaded,i=a?c(t,n,o):t;i!==this.state.targetImageURL&&(this.setState({targetImageURL:i,showTargetImage:!1}),r(!1))}},{key:"renderSVG",value:function(){var e=this.props.imageURL;return o.createElement("div",{className:"svg-content",style:{backgroundImage:"url("+e+")",backgroundSize:"contain",backgroundRepeat:"no-repeat",width:"100%",height:"100%",position:"absolute"}})}},{key:"renderImage",value:function(){var e=this.props,t=e.imageURL,n=e.isBigImg,a=e.isPageLoadAll,l=this.state,s=l.targetImageURL,c=l.showTargetImage,u=i.getStyledImage(t,"!thumb-p-25");return n?o.createElement("img",{className:r.default("common-img",void 0!==a&&!a&&"page-loading"),src:s,style:Object.assign({},this.props.viewSize,{display:c?"block":"none"}),onLoad:this.onTargetImageLoaded,onError:this.onTargetImageLoaded}):o.createElement("div",null,o.createElement("img",{className:r.default("common-img",void 0!==a&&!a&&"page-loading"),src:u,style:Object.assign({},this.props.viewSize,{display:c?"none":"block"})}),o.createElement("img",{className:r.default("common-img",void 0!==a&&!a&&"page-loading"),src:s,style:Object.assign({},this.props.viewSize,{display:c?"block":"none"}),onLoad:this.onTargetImageLoaded,onError:this.onTargetImageLoaded}))}},{key:"render",value:function(){return-1!==this.props.imageURL.indexOf(".svg")&&l.isIE?this.renderSVG():this.renderImage()}}]),t}(o.PureComponent);t.default=d},2369:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(8),i=n(2336),l=n(656),s=n(120);n(2370);var c=n(2371),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.page,o=e.scale,r=e.mode,s=e.viewPortRect;return n.state={imgShowList:a.parts.map((function(){return{thumbShow:!0}})),showParts:l.getBigPageParts(s,a,o,r)},n.debounceGetShowParts=i(n.getShowParts,500),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.loadNewImg()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.page,a=t.scale,o=t.viewPortRect;if(n._id!==e.page._id&&this.loadNewImg(),o&&e.viewPortRect){var r=e.viewPortRect,i=r.top,l=r.right,s=r.bottom,c=r.left;a===e.scale&&o.top===i&&o.right===l&&o.bottom===s&&o.left===c||this.debounceGetShowParts()}}},{key:"getShowParts",value:function(){var e=this.props,t=e.page,n=e.scale,a=e.mode,o=e.viewPortRect;this.setState({showParts:l.getBigPageParts(o,t,n,a)})}},{key:"loadNewImg",value:function(){var e=this.props.page;this.setState({imgShowList:e.parts.map((function(){return{thumbShow:!0}}))})}},{key:"onTargetImageLoaded",value:function(e){var t=this.state.imgShowList;this.setState({imgShowList:t.map((function(t,n){return e===n?{thumbShow:!1}:t}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,a=t.zoom,i=t.viewPortRect,l=t.isPageLoadAll,u=this.state,d=u.imgShowList,p=u.showParts;return i&&n&&n.parts?o.createElement("div",{className:r.default("c-huge-page")},p.map((function(t,n){return t.show?o.createElement(o.Fragment,{key:t.imageURL+"-fragment"},d[n]&&d[n].thumbShow&&o.createElement(c.default,{key:t.imageURL+"-thumb",src:s.getStyledImage(t.imageURL,"!thumb-p-25"),isPageLoadAll:l,style:{position:"absolute",left:t.position.x*a,top:t.position.y*a,width:t.size.width*a,height:t.size.height*a}}),o.createElement("img",{key:t.imageURL+"-target",src:t.imageURL,loading:"lazy",className:r.default("common-img",void 0!==l&&!l&&"page-loading"),width:t.size.width*a,height:t.size.height*a,style:{position:"absolute",left:t.position.x*a,top:t.position.y*a,width:t.size.width*a,height:t.size.height*a,display:(void 0===l||l)&&d[n]&&d[n].thumbShow?"none":"block"},onLoad:function(t){e.onTargetImageLoaded(n)},onError:function(t){e.onTargetImageLoaded(n)}})):null}))):null}}]),t}(o.Component);t.default=u},2370:function(e,t,n){},2371:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);n(2372);var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loaded:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.src,a=t.style,r=t.isPageLoadAll;this.state.loaded;return o.createElement("img",{className:""+(void 0!==r&&!r&&"page-loading"),src:n,loading:"lazy",width:null==a?void 0:a.width,height:null==a?void 0:a.height,style:a||null,onLoad:function(){e.setState({loaded:!0})}})}}]),t}(o.Component);t.default=r},2372:function(e,t,n){},2373:function(e,t,n){},2374:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(8);n(2375);var r=a.memo((function(e){if(!e.dataURL)return e.onLoad(e.dataURL),null;var t=e.isPageLoadAll;return a.createElement("iframe",{className:o.default("rp-page",void 0!==t&&!t&&"page-loading"),src:e.dataURL,style:{pointerEvents:e.preventEvents?"none":"unset"},onLoad:function(){e.onLoad&&e.onLoad(e.dataURL)},onError:function(){e.onLoad&&e.onLoad(e.dataURL)}})}));t.default=r},2375:function(e,t,n){},2376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(665)({loader:function(){return Promise.resolve().then((function(){return n(2377)}))},loading:n(659).default});t.default=function(e){return a.createElement(o,Object.assign({},e))}},2377:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);n(2378);var r=n(2379),i=n(663),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.self=o.createRef(),n.doCheckInView=function(){if(n.self.current){var e=window,t=e.innerHeight,a=e.innerWidth,o=n.self.current.getBoundingClientRect(),r=o.left,i=o.top,l=o.right,s=o.bottom,c=o.width,u=o.height,d=!(r>a||l<0||i>t||s<0||0===c||0===u);d!==n.state.inView&&n.setState({inView:d})}},n.doReconstruction=function(e){if(e){var t=e.ID,a=e.name,o=e.controls,r={ID:t,name:a,size:e.size,loaded:!0,controls:[]};r.controls=function e(t){return t.map((function(t){var n={data:t,dynamicProperties:{}};return t.children&&(n.isGroup=!0,n.children=e(t.children)),n}))}(o),r.param=e.param,n.setState({pageData:r})}else n.setState({pageData:void 0})},n.doLoadPage=function(e){var t=e.clientID||e.offlineDemoNodeID;e.loaded||i.TaskManager.taskManager.push((function(a){i.default.loadPageData(t,e.dataURL,(function(e,o){o?i.default.parsePage(t,o,(function(e){e.error||n.doReconstruction(e.content),a()})):a()}))}))},n.renderComponent=function(e){var t=void 0,a=e.data;return e.isGroup&&(t=e.children),o.createElement(r.default,{key:a.controlID,data:e},t&&t.map((function(e){return n.renderComponent(e)})))},n.state={inView:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props.onLoad;e&&e(),this.props.isInApp&&this.doLoadPage(this.props.page)}},{key:"componentDidUpdate",value:function(e){this.props.isInApp&&this.props.page.dataURL!==e.page.dataURL&&this.doLoadPage(this.props.page)}},{key:"componentWillReceiveProps",value:function(e){this.props.page.dataURL!==e.page.dataURL||this.props.page.pageData!==e.page.pageData||e.page.pageData&&!this.state.pageData?this.doReconstruction(e.page.pageData):this.state.pageData||e.page.loaded||this.doLoadPage(e.page)}},{key:"renderPage",value:function(){var e=this,t=this.state.pageData;if(!t)return null;var n="white";return t.param&&(n=t.param.backgroundColor),o.createElement("div",{key:t.ID,style:{width:t.size.w,height:t.size.h,background:n}},o.createElement("div",null,t&&t.controls.map((function(t){return e.renderComponent(t)}))))}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,a=e.isPageLoadAll,r=Object.assign({},t);return o.createElement("div",{ref:this.self,id:this.props.ID,style:r,className:"prototype-page "+(n||"")+" "+(void 0!==a&&!a&&"page-loading")},this.renderPage())}}]),t}(o.Component);l.defaultProps={isInApp:!0},t.default=l},2378:function(e,t,n){},2379:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);n(2380);var r=n(7),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n.selfRef=o.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return this.props.data.data!==e.data.data}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.children,a=t.data,i=a.controlTypeID,l=a.controlID;if(!r.default.PropertiesHelper.getFullProperties(t).isShow)return null;var s=r.default.ComponentFactory.createComponent(i),c=r.default.StyleHelper.init(t).bounds().opacity().style,u=r.default.ComponentFactory.getComponentClassName(i);return o.createElement("div",{id:t.data.controlID,datatype:t.data.controlTypeID,style:c,className:"prototype-component"},s&&o.createElement(s,Object.assign({key:l},t,{className:u}),n))}}]),t}(o.Component);i.defaultProps={},t.default=i},2380:function(e,t,n){},2381:function(e,t,n){},2382:function(e,t,n){},2383:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(8),i=n(2384),l=n(2334),s=n(89),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.interactions,n=e.options,a=e.appType,c=e.page,u=e.fadeIn,d=e.scale,p=e.onFadeInEnd,f=e.onInteractionClick,h=e.onInteractionPan,g=e.onInteractionPanDone,m=e.overlayPage,v=c.landscape,w=c.size,y=n.mobileType,b=n.alwaysShowLinkArea,P=n.showLinkAreaWhenHovered;return o.createElement(o.Fragment,null,t.map((function(e){if(e.type===s.externalLink&&!e.target)return null;var t=e.size,n=e.position,c=l.calculateInteractionSize({appType:a,mobileType:y,landscape:v,position:n,size:t,pageSize:w,scale:d}),S=r.default("link-hot",{hovered:!b&&P,hidden:!b&&!u,normal:"web"===a,"link-hot-fade":!b&&u});return o.createElement(i.default,{key:e._id,style:c,interaction:e,clz:S,onAnimationEnd:p,onClick:f,onPan:h,onPanDone:g,overlayPage:m})})))}}]),t}(o.Component);c.defaultProps={fadeIn:!1,scale:1,options:{alwaysShowLinkArea:!0,showLinkAreaWhenHovered:!0,mobileType:s.MobileType.iphoneX},overlayPage:null},t.default=c},2384:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(2385),i=n(657),l=n(655),s=n(2334),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.interactionDiv=o.createRef(),n.onMoveStart=function(e){e.preventDefault();var t=n.props,a=t.interaction,o=t.onPan,r=t.onPanDone,i=t.overlayPage,l=a.gesture||"tap";!l||-1===l.indexOf("swipe")||i||s.moveStart(e,l,(function(e){o(e,a)}),(function(e){r(e,a)}))},n.setTiming=function(e){n.isTiming=e},n.handleOnClick=function(e,t,a,o){e&&!n.isTiming?(n.setTiming(!0),setTimeout((function(){n.setTiming(!1),o(t,a)}),e)):n.isTiming||o(t,a)},n.isTiming=!1,n.state={touchAction:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.interaction,a=t.onClick,o=t.overlayPage,i=new r(this.interactionDiv.current),c=n.gesture||"tap";"swipeup"===c?this.setState({touchAction:"pan-up"}):"swipedown"===c?this.setState({touchAction:"pan-down"}):this.setState({touchAction:"auto"});var u=n.delay||0;if(i.get("swipe").set({velocity:.1}),i.set({domEvents:!0}),"doubleClick"===c)i.on("tap",(function(t){2===t.tapCount&&e.handleOnClick(u,t,n,a)}));else if("hover"===c)this.interactionDiv.current.addEventListener("mouseenter",(function(t){e.handleOnClick(u,t,n,a)}),!1);else{var d=c;c.indexOf("swipe")>-1&&(s.getGestureDirection(c)===l.VERTICAL&&i.get("swipe").set({direction:r.DIRECTION_ALL}),o||(c="pan")),i.on(""+c,(function(t){d===c&&e.handleOnClick(u,t,n,a)}))}}},{key:"componentWillUnmount",value:function(){this.interactionDiv.current.removeEventListener("mouseenter",this.handleOnClick.bind(this))}},{key:"render",value:function(){var e=this.props,t=e.clz,n=e.onAnimationEnd,a=e.interaction,r=this.props.style,l=a.gesture||"tap",s=r.width<32||r.height<32?{display:"none"}:null,c=i.AllTriggerType[l],u=r.width>=32&&r.height>=32&&c&&c.icon;return this.state.touchAction&&(r=Object.assign(Object.assign({},r),{touchAction:this.state.touchAction})),o.createElement(o.Fragment,null,o.createElement("div",{style:r,className:t,"data-type":"interaction",onAnimationEnd:n,ref:this.interactionDiv,onClick:function(e){e.stopPropagation()},onTouchStart:this.onMoveStart,onMouseDown:this.onMoveStart},u&&o.createElement("img",{src:c.icon,style:s,alt:l})))}}]),t}(o.Component);t.default=c},2386:function(e,t,n){},2387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(8),r=n(48),i=n(100),l=function e(t){var n=t.page,l=t.selID,s=t.needScroll,c=t.setNeedScroll,u=t.onExpand,d=t.onSelected,p=t.offset,f=void 0===p?0:p,h=t.isDropDownList,g=t.downArrowShow,m=n.children,v=n.name,w=n.expand,y=n._id,b=n.color,P=n.icon,S=n.isGroup,E=n.isHomepage,k=n.landscape,I=!(S||m&&0!==m.length);return a.createElement("div",{key:y,className:"tree-node",style:{position:"relative",right:0}},a.createElement("div",{className:o.default("tree-node-title",{selected:y===l},{"drop-down-list-item":h}),ref:function(e){y===l&&e&&s&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()},onClick:function(e){e.stopPropagation(),c(),I?d(n):(S&&u(n),!S&&d(n))},style:{paddingLeft:f}},a.createElement("span",null,I?a.createElement("span",{className:"no-icon"}):a.createElement(r.Icon,{cls:w?"tag_downarrow":"tag_rightarrow",solid:!0,onClick:function(e){c(),e.stopPropagation(),i.isCtrlKey(e)?u(n,!0):u(n)}})),E&&a.createElement(r.Icon,{cls:"demo_home"}),k&&a.createElement(r.Icon,{cls:"tree_phone"}),S&&a.createElement(r.Icon,{cls:"tree_group",color:"#969798"}),!S&&P&&a.createElement(r.Icon,{cls:P,color:b}),!S&&!P&&b&&a.createElement("div",{className:"default-icon",style:{background:b}}),a.createElement("span",{className:o.default("tree-node-title-name",{"click-able":!S}),title:v},v)),w&&m&&a.createElement("div",{className:o.default("tree-node-content",{expand:w})},m&&m.map((function(t){return a.createElement(e,{key:t._id,isDropDownList:h,page:t,selID:l,needScroll:s,setNeedScroll:c,onExpand:u,onSelected:d,offset:f+16,downArrowShow:g})}))))};l.defaultProps={page:null,selID:null,onExpand:null,onSelected:null,offset:0,downArrowShow:!0},t.default=l},2388:function(e,t,n){},2389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),i=f(r),l=f(n(5)),s=n(48),c=n(18),u=f(n(2390)),d=n(2334),p=f(n(6));function f(e){return e&&e.__esModule?e:{default:e}}n(2391);var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));g.call(n);var a=n.doExpandAllNode(e.data);return n.state={data:a},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.selectedID,a=t.cls,o=t.downArrowShow,r=t.links,l=t.homePageId,s=t.groupCount,f=t.pageCount,h=t.name,g=this.state.data;var m,v,w,y,b=(m=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,v=window.devicePixelRatio||1,w=window.screen.width*v,y=window.screen.height*v,!!(m&&1125===w&&2436===y||m&&828===w&&1792===y||m&&1242===w&&2688===y));return i.default.createElement("div",{className:"phone-preview-tree "+a,style:{paddingTop:b?"120px":"80px",paddingBottom:d.isLarkApplets&&!c.isZh?"0px":"92px"}},i.default.createElement("div",{className:"tree-head",style:{top:b?"30px":"0px"}},i.default.createElement("div",{className:"tree-head-wrap"},i.default.createElement("div",{className:"logo"},i.default.createElement("div",{className:"icon idoc_iconfont icon-_logo"})),i.default.createElement("div",{className:"text"},i.default.createElement("span",null,h),i.default.createElement("p",null,(0,p.default)("appManager.countLabel",s,f))))),i.default.createElement("div",{className:"tree-wrap"},this.renderLinks(r),g&&g.map((function(t){return i.default.createElement(u.default,{key:t._id,page:t,homePageId:l,downArrowShow:o,selID:n,onExpand:e.handleNodeExpandChange,onSelected:e.handleNodeSelected})}))),this.renderExit())}}]),t}(r.Component),g=function(){var e=this;this.doExpandAllNode=function(t){return t.map((function(t){var n=a({},t,{expand:!0});return n.children&&n.children.length&&(n.children=e.doExpandAllNode(n.children)),n}))},this.handleNodeExpandChange=function(t){if(e.props.canExpand){var n=t;n.expand=!n.expand;var a=e.state.data,o=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a));e.setState({data:o})}},this.handleNodeSelected=function(t){if(t._id&&!t.isGroup){var n=e.props.onPageSelected;n&&n(t._id)}},this.renderLinks=function(){var t=e.props.links;return t?i.default.createElement("div",{className:"links-container"},t.map((function(t){return i.default.createElement("div",{className:"tree-node"},i.default.createElement("div",{className:"tree-node-title link",onClick:function(n){n.stopPropagation(),e.handleNodeSelected(t)}},i.default.createElement("span",null,t.name)))}))):null},this.exitPreview=function(){d.isLarkApplets?tt&&tt.miniProgram&&tt.miniProgram.navigateBack&&tt.miniProgram.navigateBack():d.isLarkBrowser?window.h5sdk&&window.h5sdk.ready((function(){window.h5sdk.biz.navigation.close({})})):window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("exit")},this.shareApp=function(){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("share")},this.renderExit=function(){return c.isiOS&&!d.isLarkApplets&&c.isZh?i.default.createElement("div",{className:"tree-exit-preview-ios"},i.default.createElement(s.Icon,{cls:"icon_right",size:22}),i.default.createElement("div",{className:"text"},(0,p.default)("preview.iosExitText"))):d.isLarkApplets&&c.isZh||!d.isLarkApplets&&(!c.isiOS||!c.isZh)?i.default.createElement("div",{className:"tree-exit-preview"},i.default.createElement("div",{className:"tree-exit",style:{border:"none"}},i.default.createElement(s.Button,{width:"100%",onClick:e.exitPreview},(0,p.default)("preview.exit")))):void 0}};h.propTypes={data:l.default.arrayOf(l.default.shape({})).isRequired,selectedID:l.default.string,onPageSelected:l.default.func,canExpand:l.default.bool,cls:l.default.string,downArrowShow:l.default.bool},h.defaultProps={selectedID:"",onPageSelected:null,canExpand:!0,cls:"",downArrowShow:!0},t.default=h},2390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(0)),o=l(n(5)),r=l(n(8)),i=n(48);function l(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){var n=t.page,o=t.selID,l=t.onExpand,s=t.onSelected,c=t.offset,u=void 0===c?0:c,d=t.downArrowShow,p=t.homePageId,f=n.children,h=n.name,g=n.expand,m=n._id,v=n.color,w=n.icon,y=n.isGroup,b=!(y||f&&0!==f.length),P=n._id===p;return a.default.createElement("div",{key:m,className:"tree-node",style:{position:"relative",right:0}},a.default.createElement("div",{className:(0,r.default)("tree-node-title",{selected:m===o}),onClick:function(e){y?(e.stopPropagation(),b||l(n)):s(n)},style:{paddingLeft:u}},!y&&a.default.createElement("span",{className:f.length<1&&P?"no-child":null,onClick:function(e){e.stopPropagation(),b||l(n)}},a.default.createElement("svg",{viewBox:"0 0 8 8",style:d?null:{visibility:"hidden"}},a.default.createElement("path",{className:(0,r.default)("path",{leaf:b}),d:g?"M0 2 H8 L4 6 Z":"M2 0 V8 L6 4 Z"}))),P&&a.default.createElement(i.Icon,{cls:"broad_home"}),y&&a.default.createElement(i.Icon,{cls:g?"tree_index":"tree_group",color:"#222"}),!y&&w&&a.default.createElement(i.Icon,{cls:w,color:v}),!y&&!w&&v&&a.default.createElement("div",{className:"default-icon ",style:{background:v}}),a.default.createElement("span",{className:"tree-node-title-name"},h)),g&&f&&a.default.createElement("div",{className:(0,r.default)("tree-node-content",{expand:g})},f&&f.map((function(t){return a.default.createElement(e,{key:t._id,page:t,selID:o,onExpand:l,homePageId:p,onSelected:s,offset:u+24,downArrowShow:d})}))))};s.propTypes={page:o.default.shape({}),selID:o.default.string,onExpand:o.default.func,onSelected:o.default.func,offset:o.default.number,downArrowShow:o.default.bool},s.defaultProps={page:null,selID:null,onExpand:null,onSelected:null,offset:0,downArrowShow:!0},t.default=s},2391:function(e,t,n){},2392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(48),r=n(6),i=n(2334);n(2344);var l=n(2345);t.default=function(e){var t=e.name,n=e.icon||l;return a.createElement("div",{className:"c-preview-guide"},a.createElement("div",{className:"gesture top"},a.createElement(o.Icon,{cls:"interaction_gestu1",size:24,color:"#999"})),a.createElement("div",{className:"guide-top"},a.createElement("img",{src:n}),a.createElement("p",null,t)),a.createElement("div",{className:"guide-bottom"},a.createElement("p",null,r.default("preview.guide.addToScreen")),a.createElement("p",null,r.default("preview.guide.clickScreenTop")),a.createElement("p",null,r.default("preview.guide.selectOpenInSafari")),a.createElement("p",null,r.default("preview.guide.addedBestExperience")),a.createElement("p",null,r.default("preview.guide.afterAdding"),a.createElement("span",{onClick:function(){sessionStorage.setItem("fromGuide","true"),window.location.href=i.getForcePreviewURL()}},r.default("preview.guide.directlyOpen")))))}},2393:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(48),r=n(6),i=n(2334);n(2344);var l=n(2345);t.default=function(e){var t=e.name,n=e.icon||l;return a.createElement("div",{className:"c-preview-guide"},a.createElement("div",{className:"guide-top"},a.createElement("img",{src:n}),a.createElement("p",null,t)),a.createElement("div",{className:"guide-bottom"},a.createElement("p",null,r.default("preview.guide.addToScreen")),a.createElement("p",null,r.default("preview.guide.clickScreenBottom")," ",a.createElement(o.Icon,{cls:"workdesk",size:10,color:"#007aff"})),a.createElement("p",null,r.default("preview.guide.selectAddToScreen")),a.createElement("p",null,r.default("preview.guide.addedBestExperience")),a.createElement("p",null,r.default("preview.guide.afterAdding"),a.createElement("span",{onClick:function(){sessionStorage.setItem("fromGuide","true"),window.location.href=i.getForcePreviewURL()}},r.default("preview.guide.directlyOpen")))),a.createElement("div",{className:"gesture bottom"},a.createElement(o.Icon,{cls:"interaction_gestu2",size:24,color:"#999"})))}},2394:function(e,t,n){},2395:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r,i,l=n(0),s=n(8),c=n(2346),u=n(121),d=n(48),p=n(2399),f=n(2402),h=n(2404),g=n(2408),m=n(74),v=n(2410),w=n(2338),y=n(35),b=n(89),P=n(52),S=n(2337),E=n(2412),k=n(662),I=n(658),O=n(30),_=n(6);n(2414),function(e){e.alwaysShowLinkArea="la",e.autoScreen="fc",e.showControllerPanel="ps",e.showLinkAreaWhenHovered="ha",e.mobileType="dt"}(r||(r={})),function(e){e.alwaysShowLinkArea="alwaysShowLinkArea",e.autoScreen="autoScreen",e.showControllerPanel="showControllerPanel",e.showLinkAreaWhenHovered="showLinkAreaWhenHovered",e.mobileType="mobileType"}(i||(i={}));var L=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.axureRef=l.createRef(),n.shell=l.createRef(),n.contextDom=l.createRef(),n.getUrlPreviewOptionsInfo=function(e){var t={alwaysShowLinkArea:r.alwaysShowLinkArea,autoScreen:r.autoScreen,showControllerPanel:r.showControllerPanel,showLinkAreaWhenHovered:r.showLinkAreaWhenHovered,mobileType:r.mobileType},n={};return e&&(n=c.parse(e)),{alwaysShowLinkArea:n[t[i.alwaysShowLinkArea]],mobileType:n[t[i.mobileType]],showControllerPanel:n[t[i.showControllerPanel]],showLinkAreaWhenHovered:n[t[i.showLinkAreaWhenHovered]],showToolbar:!0,autoScreen:n[t.autoScreen]}},n.getAxurePageDataURL=function(e){var t=decodeURI(e),n=t.lastIndexOf(".html");return t=t.substring(0,n+5)},n.changeAxureUrl=function(e){var t,a,o=n.props,r=o.loaded,i=o.app,l=n.state.selectedPageID;if(r){var s=y.getFlattenPages(i.children);if(0===s.length)return;var c=s.find((function(t){return n.getAxurePageDataURL(e).includes(t.dataURL)}));c&&c._id!==l&&(n.onPageSelected(c._id,!0),null===(a=null===(t=document.getElementById("axure-page"))||void 0===t?void 0:t.contentWindow)||void 0===a||a.postMessage({type:"optionsChanged",opt:n.state.previewOptions},"*"))}},n.changeAxureAdaptiveViews=function(e){e&&0===e.length?n.setState({axureAdaptiveViews:null}):n.setState({axureAdaptiveViews:e})},n.receiverMessage=function(e){var t,a,o,r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.resize,i=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.axureLocation,l=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.adaptiveViews;if(i&&n.changeAxureUrl(i),l&&n.changeAxureAdaptiveViews(l),r){var s=n.state.scale,c=s;if(s<.1&&r>0||s>4&&r<0)return null;var u=Math.min(Math.pow(100*s/50,1.7)+4,Math.pow(100*s/30,2)+2);if(c=r<0?s-u/100:s+u/100,c=Math.min(4,Math.max(.1,c)),e.data&&e.data.resize){n.setState({scale:c});var d=n.props.changeScale;d&&d(c)}}},n.onContextMenu=function(e){e.preventDefault()},n.onToggled=function(){n.shell.current&&n.shell.current.calculatePoint()},n.onExit=function(){var e=n.props.app,t=e.appID,a=e.type,o=e._id,r="/app/"+t+"/design";a!==P.AppTypes.SubAxure&&a!==P.AppTypes.SubMockPlus||(r="/app/"+t+"/prototype/"+o),window.location.href=r},n.onChangeScale=function(e){var t=n.props.changeScale;n.setState({scale:e}),t&&t(e)},n.doInitPreviewOptions=function(){var e,t,a=n.props,o=a.app,r=a.loaded,i=a.location,l={};r&&o&&(l=i.search?n.getUrlPreviewOptionsInfo(i.search):{showLinkAreaWhenHovered:o.showLinkAreaWhenHovered,alwaysShowLinkArea:o.alwaysShowLinkArea,mobileType:o.mobileType,showControllerPanel:o.showControllerPanel,showToolbar:o.showToolbar,autoScreen:o.autoScreen},P.isAxureApp(o.type)&&(i.search?l=n.getUrlPreviewOptionsInfo(i.search):(l.showLinkAreaWhenHovered=!0,l.alwaysShowLinkArea=!1),null===(t=null===(e=document.getElementById("axure-page"))||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({type:"optionsChanged",opt:l},"*")),n.setState({previewOptions:l}))},n.doInitTreeData=function(){var e=n.props,t=e.app,a=e.loaded,o=n.state.treeData;if(a&&t&&!o){var r=t.homepage;r&&n.setHome(t.children,r),n.setState({treeData:t.children})}},n.autoScale=function(e){var t=n.props.changeScale;n.setState({scale:e||1}),t&&t(e||1)},n.doZoom=function(e){var t=n.props.changeScale;n.setState({scale:e/100},(function(){t&&t(e/100)}))},n.handleWindowMouseDown=function(){var e=n.state.previewOptions,t=n.props.onLinkAreaFadeInStart;e&&!e.alwaysShowLinkArea&&t()},n.handleSwitchControlPanelVisible=function(){var e=n.state.previewOptions;e.showControllerPanel=!e.showControllerPanel,n.setState({previewOptions:e},(function(){var t=n.getUrlSearchObj(e);n.changeUrl(t)}))},n.onCopyPreviewURL=function(e,t,a){var o=n.props.showMessage,r="";if(O.larkPC){var i=encodeURIComponent("pages/common/index?otherUrl="+e+"&isPreview=true");r=_.default("lark.previewPrompt")+"\r\n      "+_.default("lark.openInLark")+O.larkAppLink+"/client/mini_program/open?appId="+O.larkAppId+"&mode=window&path="+i+"\r\n      "+_.default("lark.openInBrowser")+e,a&&(r+="\r\n      "+_.default("preview.previewVisitPass")+t)}else{var l=""+_.default("preview.previewLinkText")+e+" \n",s=""+_.default("preview.previewVisitPass")+t;r=a?l+s:""+e}k.copy(r)&&o(_.default("preview.copySuccess"))},n.isPrototype=function(){var e=n.props.module;return![O.Modes.ModeDesign,O.Modes.ModeRP].includes(e||"")},n.onPageSelected=function(e,t){var a=n.props.singlePreview,o=n.props.app,r=n.props.match.params,i=r.module,l=r.prototypeID;if(o)if(a){var s=n.props.module;n.isPrototype(),n.props.redirectTo("/app/"+o.appID+"/"+O.Modes.ModeSpecs+"/"+s+"/"+e,null,!1)}else"prototype"===i?n.props.redirectTo("/run/"+i+"/"+o.shareID+"/"+l+"/"+e,null,!1):n.props.redirectTo("/run/"+i+"/"+o.shareID+"/"+e,null,!1);n.setState({selectedPageID:e},(function(){t?n.props.changeUrlMessage():n.props.onPageSelected(e)}))},n.getUrlSearchObj=function(e){var t=n.props.app,a={};if(P.isMockplusApp(t.type))a=o({},e.showControllerPanel?"ps":"",1);else if(P.isAxureApp(t.type)){var r;o(r={},e.alwaysShowLinkArea?"la":"",1),o(r,e.showControllerPanel?"ps":"",1),o(r,e.showLinkAreaWhenHovered?"ha":"",1),a=r}else{var i;o(i={},e.alwaysShowLinkArea?"la":"",1),o(i,e.autoScreen?"fc":"",1),o(i,e.showControllerPanel?"ps":"",1),o(i,e.showLinkAreaWhenHovered?"ha":"",1),o(i,"dt",e.mobileType),a=i}return delete a[""],a},n.changeUrl=function(e){n.props.history.push("?"+c.stringify(e))},n.onOptionsChanged=function(e){var t,a,o=n.props.app;P.isAxureApp(o.type)&&(null===(a=null===(t=document.getElementById("axure-page"))||void 0===t?void 0:t.contentWindow)||void 0===a||a.postMessage({type:"optionsChanged",opt:e},"*"));var r=n.getUrlSearchObj(e);n.changeUrl(r),n.setState({previewOptions:e})},n.axureAdaptiveViewChange=function(e){"auto"!==e&&n.setState({view:e})},n.shellDom=l.createRef(),n.isFirstLoaded=!0,n.state={scale:e.scale,treeData:null,selectedPageID:e.currentPage?e.currentPage._id:"",previewOptions:{alwaysShowLinkArea:!e.previewOptions||e.previewOptions.alwaysShowLinkArea,mobileType:e.previewOptions?e.previewOptions.mobileType:b.MobileType.iphone,showControllerPanel:!0,showLinkAreaWhenHovered:!e.previewOptions||e.previewOptions.showLinkAreaWhenHovered,showToolbar:!0,autoScreen:!e.previewOptions||e.previewOptions.autoScreen,axureAdaptiveViews:null,view:"",updateTip:!1}},n.setHome=n.setHome.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e,t,n=this.props,a=n.changeOptionCallback,o=n.onloadCallback;window.addEventListener("mousedown",this.handleWindowMouseDown),window.addEventListener("contextmenu",this.onContextMenu),this.doInitPreviewOptions(),this.doInitTreeData(),m.joinSocketRoom(null===(t=null===(e=this.props)||void 0===e?void 0:e.app)||void 0===t?void 0:t.appID,(function(e){})),window.addEventListener("message",this.receiverMessage),a&&a(this.onOptionsChanged),o&&o(this)}},{key:"componentDidUpdate",value:function(e,t){var n,a,o=this,r=this.props,i=r.scale,l=r.previewOptions,s=r.isFirstLoaded,c=r.axureView;if(c!==e.axureView&&c&&this.setState({view:c}),l!==e.previewOptions&&l){var u=l.alwaysShowLinkArea,d=l.mobileType,p=l.showLinkAreaWhenHovered,f=l.autoScreen;this.setState({previewOptions:Object.assign(Object.assign({},this.state.previewOptions),{alwaysShowLinkArea:u,mobileType:d,showLinkAreaWhenHovered:p,autoScreen:f})})}if(e.scale!==i&&this.setState({scale:Number(i)||1}),this.isFirstLoaded&&s){var h=this.props,g=h.loaded,v=h.currentPage,w=h.onPreLoadImage;if(g){var b=this.props.app;if(0===y.getFlattenPages(b.children).length)return;this.isFirstLoaded=!1,this.doInitPreviewOptions(),w(v._id),this.doInitTreeData(),document.title=null==b?void 0:b.name}}this.props.currentPage._id!==e.currentPage._id&&this.setState({selectedPageID:this.props.currentPage._id},(function(){if(e.location.search){var t=o.getUrlSearchObj(o.state.previewOptions);o.changeUrl(t)}})),m.storyboardUpdate(null===(a=null===(n=this.props.user)||void 0===n?void 0:n.user)||void 0===a?void 0:a.id,this.props.app.appID).then((function(e){o.state.updateTip!==e&&o.setState({updateTip:e})}))}},{key:"componentWillUnmount",value:function(){var e,t;window.removeEventListener("mousedown",this.handleWindowMouseDown),window.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("message",this.receiverMessage),m.leaveSocketRoom(null===(t=null===(e=this.props)||void 0===e?void 0:e.app)||void 0===t?void 0:t.appID);var n=this.props.onUnMount;n&&n()}},{key:"setHome",value:function(e,t){var n=this;e&&e.forEach((function(e){e._id===t&&(e.isHomepage=!0),e.children&&n.setHome(e.children,t)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.singlePreview,a=t.currentPage,o=t.app,r=t.user,i=t.preview,c=t.notFromInvitation,u=t.isLarkTeam,d=t.goBackWard,g=t.goForWard,m=t.goHome,w=t.goPrevPage,y=t.goNextPage,b=t.openLarkShareDialog,S=t.redirectTo,E=this.state,k=E.previewOptions,L=E.scale,T=E.treeData,x=E.selectedPageID,C=E.axureAdaptiveViews,A=E.updateTip;if(!k||!i||!T)return null;var D=x;if(P.isRpApp(o.type)){var N="/run/rp/"+o.shareID;return D&&(N+="/"+D),I.isInIframe()&&(N+="?embeded=1"),l.createElement("iframe",{className:"rp-run-iframe",src:N})}var M=this.props.match.params,j=M.module,R=M.prototypeID,U=!i.license||"free"===i.license.license,z=-1===window.location.href.indexOf("control=false");return l.createElement(p.default,{className:s.default("hot-keys-container",{"preview-container-larkPc":O.larkPC}),keyDownHandlers:{escape:this.onExit,arrowleft:d,arrowright:g,arrowup:w,arrowdown:y},keyUpHandlers:{}},l.createElement("div",{className:s.default("c-preview",{"preview-container-larkPc":O.larkPC})},!n&&l.createElement(f.default,{isShow:z&&k.showControllerPanel,isFree:U,name:o.name,username:o.username,appType:o.appType,options:k,onOptionsChanged:this.onOptionsChanged,onClose:this.handleSwitchControlPanelVisible,data:T,selectedID:D,onPageSelected:this.onPageSelected,onToggled:this.onToggled,teamName:o.teamName,notFromInvitation:c,showOptions:P.isNormalApp(o.type),isMockplusApp:P.isMockplusApp(o.type),axureAdaptiveViews:C,module:j,appID:o.ownerAppID,axureAdaptiveViewChange:this.axureAdaptiveViewChange,onToggleControllerPanelVisible:this.handleSwitchControlPanelVisible,redirectTo:S}),this.renderPreviewContent(),l.createElement(v.default,{className:"showLoadingTipBox",tipContent:_.default("socketIO.storyboardUpdate"),show:A,onCloseTip:function(){e.setState({updateTip:!1}),location.reload()}})),!n&&l.createElement(h.default,{user:r,isShow:z&&k.showToolbar,showControllerPanel:k.showControllerPanel,scale:100*L,canBack:i.hasBack,canNext:i.hasNext,currentPage:a._id,onBackWard:d,onForWard:g,onGoHome:m,onZoomChange:this.doZoom,onExit:this.onExit,onCopyPreviewURL:this.onCopyPreviewURL,zip:i.zip,isLarkTeam:u,openLarkShareDialog:b,moduleID:null!=R?R:j}))}},{key:"renderPreviewContent",value:function(){var e,t=this.props,n=t.currentPage,a=t.nextPage,o=t.app,r=t.interactions,i=t.preview,s=t.linkFadeIn,c=t.needPerspective,u=t.overlayPage,p=t.overlayAnimation,f=t.singlePreview,h=t.singPageFirstLoad,m=this.state,v=m.previewOptions,y=m.scale,b=m.treeData,k=m.view;if(!v||!i||!b)return null;if(P.isAxureApp(o.type)&&n.dataURL)return l.createElement("div",{className:"preview-context",ref:this.contextDom},l.createElement("div",{className:"special-preview-page-wrapper",style:{transform:"scale("+y+")",transformOrigin:"top left",width:"calc("+100/y+"% + 2px)",height:"calc("+100/y+"% + 2px)"}},l.createElement(S.default,{isPreviewPage:!0,clientID:n.clientID,sourceInfo:n.sourceInfo,dataURL:n.dataURL,preventEvents:!1,ref:this.axureRef,adjustBodyPosition:!1,view:k,dynamicCreate:!1})));if(P.isMockplusApp(o.type))return l.createElement("div",{className:"preview-context",ref:this.contextDom},l.createElement("div",{className:"special-preview-page-wrapper special-preview-page-wrapper-mockplus",style:{transform:"scale("+y+")",transformOrigin:"top left",width:"calc("+100/y+"% + 2px)",height:"calc("+100/y+"% + 2px)"}},l.createElement(E.default,{dataURL:n.dataURL})));var I=n?Object.assign({},n.size):{width:0,height:0};return l.createElement("div",{className:"preview-context",ref:this.contextDom},l.createElement(d.ScrollView,null,l.createElement(g.default,{firstLoad:h,singlePreview:f,ref:this.shell,shellRef:this.shellDom,size:I,scale:y,appType:null!==(e=o.type)&&void 0!==e?e:o.appType,mobileType:v.mobileType,isLandscape:n.landscape,onMount:this.autoScale,needPerspective:c,autoScreen:v.autoScreen,onChangeScale:this.onChangeScale,isShowToolbar:v.showControllerPanel},l.createElement(w.default,{interactions:r,firstPage:n,nextPage:a,overlayPage:u,scale:y,appType:o.appType,options:v,isFadeIn:s,overlayAnimation:p,panState:i.panState,delta:i.delta,type:o.type,shareID:o.shareID}))))}}]),t}(l.Component);L.defaultProps={app:null,preview:null,currentPage:null,nextPage:null,overlayPage:null,interactions:null,loaded:!1,goHome:null,goBackWard:null,goForWard:null,onPreLoadImage:null,linkFadeIn:!1,onLinkAreaFadeInStart:null,onPageSelected:null,needPerspective:!1,overlayAnimation:"",user:null,goPrevPage:null,goNextPage:null,notFromInvitation:!1,isFromApps:!1,singlePreview:!1,scale:1,isFirstLoaded:!0,singPageFirstLoad:!1},t.default=u.withRouter(L)},2399:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var o=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(8),l=n(2400);n(2401);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onKeyDown=n.onKeyDown.bind(n),n.onKeyUp=n.onKeyUp.bind(n),n.dom=r.createRef(),n.focused=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"onKeyDown",value:function(e){var t=l.convertEventToHotKey(e),n=this.props,a=n.keyDownHandlers,o=n.showColorConfigPanel,r=a&&a[t];r&&!o&&(r(e),"ctrl+c"!==t&&e.preventDefault(),e.stopPropagation())}},{key:"onKeyUp",value:function(e){var t=l.convertEventToHotKey(e),n=this.props.keyUpHandlers,a=n&&n[t];a&&(a(e),e.preventDefault(),e.stopPropagation())}},{key:"focus",value:function(){this.dom.current&&this.dom.current.focus()}},{key:"blur",value:function(){this.dom.current&&this.dom.current.blur()}},{key:"render",value:function(){var e,t,n,a=this,l=this.props,s=l.className,c=l.style,u=(l.keyDownHandlers,l.keyUpHandlers,o(l,["className","style","keyDownHandlers","keyUpHandlers"]));return r.createElement("div",Object.assign({className:i.default("hot-key-catcher",(e={},t=s||"",n=!0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),ref:this.dom,style:c,tabIndex:-1,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onBlur:function(){a.focused=!1},onFocus:function(){a.focused=!0}},u),this.props.children)}}]),t}(r.Component);t.default=s},2400:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeKeyUpListener=t.addKeyUpListener=t.removeKeyDownListener=t.addKeyDownListener=t.isHotKeyPressed=t.convertEventToHotKey=void 0;var a=n(18),o={},r={};t.convertEventToHotKey=function(e){var t=[],n=e.key.toLowerCase();return("control"===n||"meta"===n||e.metaKey||e.ctrlKey)&&t.push("ctrl"),(e.altKey||"alt"===n)&&t.push("alt"),(e.shiftKey||"shift"===n)&&t.push("shift"),!function(e){return a.isMacOS?"backspace"===e:"delete"===e||"del"===e}(n)?function(e){return-1===["control","shift","alt","meta"].indexOf(e.toLowerCase())}(e.key)&&t.push(e.key):t.push("delete"),t.join("+").toLowerCase()};var i=function(e){switch(e){case"rename":return a.isMacOS?"enter":"f2";case"esc":return"escape";case"space":return" ";case"del":return"delete";default:return e}},l=function(e){return e.toLowerCase().split("+").map(i).join("+")};window.addEventListener("keydown",(function(e){var n=t.convertEventToHotKey(e);o[n]&&o[n].forEach((function(t){t(e)}))})),window.addEventListener("keyup",(function(e){var n=t.convertEventToHotKey(e);r[n]&&r[n].forEach((function(t){t(e)}))}));var s=function(e,t,n){if("number"!=typeof t){var a=l(t);e[a]||(e[a]=[]),e[a].push(n)}},c=function(e,t,n){if("number"!=typeof t){var a=l(t);e[a]&&e[a].splice(e[a].indexOf(n),1)}};t.isHotKeyPressed=function(e,n){return t.convertEventToHotKey(e)===l(n)},t.addKeyDownListener=function(e,t){s(o,e,t)},t.removeKeyDownListener=function(e,t){c(o,e,t)},t.addKeyUpListener=function(e,t){s(r,e,t)},t.removeKeyUpListener=function(e,t){c(r,e,t)}},2401:function(e,t,n){},2402:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(8),i=n(89),l=n(48),s=n(2343),c=n(6),u=n(44),d=n(47),p=n(2347);n(2403);var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.doToggleProgress=function(){var e=0,t=n.props.onToggled;!function n(){e<9&&window.requestAnimationFrame(n),e>0&&t(),e+=1}()},n.handleOptionsChanged=function(e){var t=n.props,a=t.options,o=t.onOptionsChanged,r=Object.assign(Object.assign({},a),e);o&&o(r)},n.handleChange=function(e){var t=n.props.data;if(n.setState({inputValue:e}),e.trim()){var a=e.toLocaleLowerCase(),o=t.filter((function(e){return u.isNodeOrChildrenMatch(e,a)}));n.setState({treeData:o})}else n.setState({treeData:n.props.data})},n.onStopSearch=function(){n.setState({isShowSearch:!1,inputValue:"",treeData:n.props.data})},n.renderPhoneType=function(){var e=n.props,t=e.options,a=e.showOptions,s=e.axureAdaptiveViews,c=n.state,u=c.isShowSearch,d=c.inputValue,p=c.axureAdaptiveViewSelected,f=t.mobileType,h=null==s?void 0:s.map((function(e){var t,n,a;return(null===(t=null==e?void 0:e.size)||void 0===t?void 0:t.width)?(null==e?void 0:e.name)+" ("+(null===(n=null==e?void 0:e.size)||void 0===n?void 0:n.width)+" x "+(null===(a=null==e?void 0:e.size)||void 0===a?void 0:a.height)+")":e.name}));return o.createElement("div",{className:r.default("mobile-type",{"mobile-type-no-options":!a})},u?o.createElement(l.SearchInput,{value:d,onChange:n.handleChange,autoFocus:!0,showClose:!0,onStopSearch:n.onStopSearch,onBlur:function(){d||n.setState({isShowSearch:!1,inputValue:"",treeData:n.props.data})}}):o.createElement(o.Fragment,null,o.createElement(l.Icon,{cls:"board_search",clickArea:{width:24,height:24},onClick:function(){n.setState({isShowSearch:!0})}}),a&&o.createElement(l.Select,{value:f,width:120,position:"right",options:Object.keys(i.MobileType).map((function(e){return i.MobileType[e]})),onSelect:function(e){n.handleOptionsChanged({mobileType:e})}}),s&&o.createElement(l.Select,{value:p,width:120,menuWidth:230,position:"right",options:h,onSelect:function(e,t){var a,o,r,i;n.setState({axureAdaptiveViewSelected:e}),n.props.axureAdaptiveViewChange(null===(a=s[t])||void 0===a?void 0:a.id),null===(r=null===(o=document.getElementById("axure-page"))||void 0===o?void 0:o.contentWindow)||void 0===r||r.postMessage({type:"axureAdaptiveViewChange",opt:null===(i=s[t])||void 0===i?void 0:i.id},"*")}})))},n.state={expand:e.isShow,isShowSearch:!1,inputValue:"",treeData:e.data,axureAdaptiveViewSelected:"Adaptive"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({expand:e.isShow})}},{key:"componentDidUpdate",value:function(e){e.isShow!==this.state.expand&&this.doToggleProgress()}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,a=t.options,i=t.selectedID,u=t.showOptions,f=t.data,h=t.username,g=t.isMockplusApp,m=t.module,v=t.appID,w=t.onClose,y=t.onPageSelected,b=t.onToggleControllerPanelVisible,P=this.state,S=P.expand,E=P.treeData,k=P.isShowSearch,I=P.inputValue,O=a.alwaysShowLinkArea,_=a.showLinkAreaWhenHovered,L=a.autoScreen,T=d.getFlatNodes(f).filter((function(e){return!e.isGroup}));return o.createElement("div",{className:"preview-directory"},o.createElement("div",{className:r.default("c-controller-panel",{expand:S,fold:!S}),onMouseDown:function(e){e.stopPropagation()}},o.createElement("div",{className:"preview-left-panel"},o.createElement("div",{className:r.default("option-panel")},o.createElement("div",{className:"project-name"},o.createElement("span",{className:"name",title:n||"",onClick:function(){window.location.href="/app/"+v+"/"+m}},n),o.createElement("div",{className:"project-info"},o.createElement("span",{className:"username"},h),o.createElement("span",{className:"project-info-dot"},""),o.createElement("span",null,c.default("preview.pageCount",null==T?void 0:T.length))),o.createElement("div",{className:"preview-close"},o.createElement(l.Icon,{cls:"demo_close",onClick:function(){w&&w()}}))),!g&&o.createElement("div",{className:"option-check"},o.createElement(l.Checkbox,{text:c.default("prototype.alwaysShowLinkArea"),checked:O,onChange:function(t){e.handleOptionsChanged({alwaysShowLinkArea:t})}})),!g&&o.createElement("div",{className:"option-check"},o.createElement(l.Checkbox,{text:c.default("prototype.showLinkAreaWhenHovered"),checked:_,onChange:function(t){e.handleOptionsChanged({showLinkAreaWhenHovered:t})}})),u&&o.createElement("div",{className:"option-check"},o.createElement(l.Checkbox,{text:c.default("prototype.autoScreen"),checked:L,onChange:function(t){e.handleOptionsChanged({autoScreen:t})}})),this.renderPhoneType()),o.createElement("div",{className:"tree-frame"},o.createElement(l.ScrollView,null,!E.length&&k?o.createElement("div",{className:"search-empty"},o.createElement("img",{src:p,alt:"",width:"64"}),o.createElement("p",null,c.default("projectTree.emptySearch"))):o.createElement(s.default,{key:"tree",searchKey:I,data:E,selectedID:i,onPageSelected:y}))))),o.createElement("span",{className:r.default("expand-directory",{show:!S})},o.createElement(l.Tooltip,{text:c.default("prdDocs.customProductDoc.directory"),align:"left",theme:"small"},o.createElement(l.Icon,{cls:"justify_align",disableHoverColor:!0,size:14,onClick:b,clickArea:{width:24,height:40}}))))}}]),t}(o.Component);f.defaultProps={name:null,isFree:!0,appType:null,options:{alwaysShowLinkArea:!0,mobileType:i.MobileType.iphone,showControllerPanel:!0,showLinkAreaWhenHovered:!0,showToolbar:!0,autoScreen:!0},data:[],selectedID:null,notFromInvitation:!1},t.default=f},2403:function(e,t,n){},2404:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(32),i=n(8),l=n(48),s=n(2405),c=n(6),u=n(30),d=n(123);n(2407);var p=n(18),f=function(e){var t="preview_navigation_bar_position";if(!e){var n=p.getLocalStorage().getItem(t);if(n){var a=JSON.parse(n),o=window.innerHeight;return a.top=Math.min(a.top,o-50),a.right=Math.max(a.right,-200),a}return{top:50,right:50}}return localStorage.setItem(t,JSON.stringify(e)),null},h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.zoomerDom=o.createRef(),n.self=o.createRef(),n.qrCode=o.createRef(),n.initQrcode=!1,n.setQrShow=function(e){n.setState({showQrCode:e}),e&&n.zoomerDom.current.closePanel(),n.manageQrMouseDown(e)},n.manageResizeEvent=function(){n.props.isShow?window.addEventListener("resize",n.handleResize):window.removeEventListener("resize",n.handleResize)},n.manageQrMouseDown=function(e){e?window.addEventListener("mousedown",n.closeQrCode):window.removeEventListener("mousedown",n.closeQrCode)},n.closeQrCode=function(){n.setState({showQrCode:!1}),n.manageQrMouseDown(!1)},n.handleResize=function(){if(n.props.isShow){var e=n.state.pt,t=n.self.current&&n.self.current.getBoundingClientRect();if(t){var a=t.left,o=t.width,r=window.innerWidth;if(a<0){var i=r-o;n.setState({pt:Object.assign(Object.assign({},e),{right:i})})}}}},n.handleMouseDown=function(e){if("IMG"!==e.target.tagName){var t=n.state,a=t.pt,o=t.showQrCode,i=a.top,l=a.right,s={top:i,right:l},c=n.self.current.getBoundingClientRect(),u=window.innerWidth,p=window.innerHeight,h=document.getElementsByTagName("iframe");h&&h.length>0&&r.each(h,(function(e){e.style.pointerEvents="none"})),d.dragDelegate((function(e,t){if(e.stopPropagation(),e.which){var a=t.x,o=t.y;s.top=Math.max(0,Math.min(i+o,p-c.height)),s.right=Math.max(0,Math.min(l-a,u-c.width)),n.setState({pt:Object.assign({},s),navigationBarHidden:0===s.right,showRightHiddenLine:!0}),0===s.right?setTimeout((function(){n.setState({navigationBarHiddenFinish:!0})}),500):n.setState({navigationBarHiddenFinish:!1})}}),(function(e,t,a){var i=n.state.isClickQrCodeIcon;n.setState({showRightHiddenLine:!1}),a&&f(s),i?(n.setState({isClickQrCodeIcon:!1}),n.setQrShow(o)):(n.setState({isClickQrCodeIcon:!1}),n.closeQrCode()),h&&h.length>0&&r.each(h,(function(e){e.style.pointerEvents="auto"}))}))}},n.handleMouseEnter=function(){var e=n.state,t=e.navigationBarHidden,a=e.pt,o=e.navigationBarHiddenFinish;t&&o&&n.setState({pt:{top:a.top,right:0},navigationBarHidden:!1,showRightHiddenLine:!1})},n.handleMouseLeave=function(){var e=n.state,t=(e.navigationBarHidden,e.pt);e.navigationBarHiddenFinish;0===t.right&&n.setState({navigationBarHidden:!0})};var a=window.localStorage.getItem("copyPreviewLinkType")||"0";return n.state={pt:f(),showQrCode:!1,codeTop:0,isClickQrCodeIcon:!1,showShareLinkDrop:!1,currentShareLinkIndex:parseInt(a),showShareDialog:!1,navigationBarHidden:!1,showRightHiddenLine:!1,navigationBarHiddenFinish:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.handleResize(),this.manageResizeEvent()}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.pt,d=n.showShareDialog,p=n.navigationBarHidden,f=n.showRightHiddenLine,h=this.props,g=h.onGoHome,m=h.onBackWard,v=h.onForWard,w=h.onZoomChange,y=h.user,b=h.scale,P=h.isShow,S=h.canBack,E=h.canNext,k=h.onExit,I=(h.showControllerPanel,h.currentPage),O=h.onCopyPreviewURL,_=h.moduleID;if(!P)return null;for(var L=window;L.parent!==L;)L=L.parent;return o.createElement("div",{ref:this.self,style:a,className:i.default("c-preview-navigation-bar",{"navigation-bar-hidden":p,"c-preview-navigation-bar-larkPc":u.larkPC}),onMouseDown:p?void 0:this.handleMouseDown,onMouseLeave:this.handleMouseLeave},o.createElement("div",{className:"navigation-bar-container"},o.createElement("div",{className:"c-preview-hidden-navigation-bar",onMouseOver:p?r.debounce(this.handleMouseEnter,300):void 0},o.createElement(l.Icon,{cls:"tag_left_arrow01",size:"16"})),o.createElement("div",{className:"navigation-bar-content"},o.createElement(l.Icon,{cls:"demo_home",tooltip:c.default("preview.goHome"),onClick:g}),o.createElement(l.Icon,{cls:"demo_leftarrow",tooltip:c.default("preview.goBackWard"),color:S?void 0:"#ccc",onClick:m}),o.createElement(l.Icon,{cls:"demo_rightarrow",tooltip:c.default("preview.goForWard"),color:E?void 0:"#ccc",onClick:v}),o.createElement("div",{className:"zoomer-container",onMouseDown:function(e){e.stopPropagation(),t.setQrShow(!1)}},o.createElement(l.Zoomer,{onZoom:w,ref:this.zoomerDom,min:20,max:400,step:10,value:b,canInput:!1,canSelect:!0})),!!(null===(e=null==y?void 0:y.user)||void 0===e?void 0:e.id)&&o.createElement("div",null,o.createElement(l.Icon,{cls:"demo_share",tooltip:c.default("preview.sharePreviewURL"),onClick:function(){return t.setState({showShareDialog:!0})}})),d&&o.createElement(s.default,{currentPage:I,closeShareRun:function(){return t.setState({showShareDialog:!1})},onCopyPreviewURL:O,moduleID:_}),u.larkPC&&o.createElement(l.Icon,{cls:"demo_quit",tooltip:c.default("preview.exit"),onClick:k}),f&&o.createElement("div",{className:"right-hidden-line"}))))}}]),t}(o.Component);h.defaultProps={scale:100,isShow:!0,canBack:!1,canNext:!1,zip:!1},t.default=h},2405:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r,i,l=n(0),s=n(2346),c=n(121),u=n(99),d=n(214),p=n(40),f=n(52),h=n(89),g=n(48),m=n(6),v=n(316),w=n(31),y=n(30);n(2406),function(e){e.alwaysShowLinkArea="la",e.autoScreen="fc",e.showControllerPanel="ps",e.showLinkAreaWhenHovered="ha",e.mobileType="dt"}(r||(r={})),function(e){e.alwaysShowLinkArea="alwaysShowLinkArea",e.autoScreen="autoScreen",e.showControllerPanel="showControllerPanel",e.showLinkAreaWhenHovered="showLinkAreaWhenHovered",e.mobileType="mobileType"}(i||(i={}));var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getUrlPreviewOptionsInfo=function(e){var t={alwaysShowLinkArea:r.alwaysShowLinkArea,autoScreen:r.autoScreen,showControllerPanel:r.showControllerPanel,showLinkAreaWhenHovered:r.showLinkAreaWhenHovered,mobileType:r.mobileType},n={};return e&&(n=s.parse(e)),{alwaysShowLinkArea:n[t[i.alwaysShowLinkArea]],mobileType:n[t[i.mobileType]],showControllerPanel:n[t[i.showControllerPanel]],showLinkAreaWhenHovered:n[t[i.showLinkAreaWhenHovered]],showToolbar:!0,autoScreen:n[t.autoScreen]}},n.isMember=function(e){return"member"===e},n.handleSetShareLinkPass=function(){var e=n.props,t=e.app,a=e.sharePassword,o=e.setShareLinkPass,r=e.password,i=e.changePassword,l=new RegExp(/^[\w`~!@#$%^&*()\-+=<>?:"{}|,.\/;'\\[\]~@#%&*\-+={}|']{0,8}$/);r&&l.test(r)&&r.indexOf(" ")<0?(n.setState({isInputError:""}),r!==a&&o(t._id,r)):r?(i(""),n.setState({isInputError:m.default("preview.setPassInputError")})):n.setState({isInputError:m.default("preview.setPassEmptyError")})},n.canOperatePass=function(){var e=n.props.roleInTeam;return y.isAdminOrSuperAdmin(e)||n.isMember(e)&&n.isCreator()},n.isEnablePassChecked=function(){var e=n.props,t=e.roleInTeam,a=e.app,o=n.state.isEnablePass;return(y.isAdminOrSuperAdmin(t)||n.isMember(t)&&n.isCreator())&&!!o||a.previewNeedPassword},n.changeShareUrl=function(e){p.setPreviewOptions(n.props.app._id,e)},n.getUrlSearchObj=function(e){var t,n=(o(t={},e.alwaysShowLinkArea?"la":"",1),o(t,e.showControllerPanel?"ps":"",1),o(t,e.showLinkAreaWhenHovered?"ha":"",1),o(t,"dt",e.mobileType),t);return delete n[""],n},n.setShareUrl=function(){var e=n.props.shareRunID,t=n.state.options,a="",o=n.isEnablePassChecked()?window.location.protocol+"//"+window.location.host+"/view/"+e:"",r=n.isEnablePassChecked()?"":window.location.protocol+"//"+window.location.host+n.props.match.url;a=o||r;var i=n.getUrlSearchObj(t);return a=a+"?"+s.stringify(i)},n.state={isEnablePass:!1,isInputError:"",options:{alwaysShowLinkArea:!0,showLinkAreaWhenHovered:!0,mobileType:h.MobileType.iphone,showControllerPanel:!0}},n.handleCopy=n.handleCopy.bind(n),n.isCreator=n.isCreator.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.app,n=e.getTeamInfo,a=e.getShareRunLink;n(t.teamID),a(t._id);var o=p.getPreviewOptions(t._id);location.search&&this.setState({options:this.getUrlPreviewOptionsInfo(location.search)}),o&&this.setState({options:o})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.sharePassword;(0,t.onCopyPreviewURL)(e,n,this.isEnablePassChecked())}},{key:"isCreator",value:function(){var e=this.props,t=e.app,n=e.userID;return t.userID===n}},{key:"render",value:function(){var e=this,t=this.props,n=t.app,a=t.password,o=(t.shareRunID,t.sharePassword),r=(t.currentPage,t.closeShareRun),i=t.changePwEnable,s=t.changePassword,c=this.state.isInputError,d=this.setShareUrl(),p=Object.keys(h.MobileType).map((function(e){return h.MobileType[e]}));return u.createPortal(l.createElement("div",{className:"share-panel share-run-dialog",onMouseDown:function(e){e.stopPropagation()}},l.createElement("div",{className:"dlg"},l.createElement(g.Dialog,{title:m.default("preview.shareRunTitle"),showOk:!1,onCancel:r},l.createElement("div",{className:"share-input-box"},l.createElement(g.Input,{disabled:!0,width:310,value:d}),l.createElement(g.Button,{onClick:function(){return e.handleCopy(d)}},m.default("preview.copy"))),l.createElement("div",{className:"share-label-wrap share-tip"},m.default("preview.shareTip")),!f.isAxureOrMockplus(n.type)&&l.createElement(l.Fragment,null,l.createElement("div",{className:"mobile-type share-label-wrap"},l.createElement("span",null,m.default("prototype.deviceShell")),l.createElement(g.Select,{options:p,value:this.state.options.mobileType,position:"right",onSelect:function(t){e.setState({options:Object.assign(Object.assign({},e.state.options),{mobileType:t})},(function(){e.changeShareUrl(e.state.options)}))}})),l.createElement("div",{className:"share-label-wrap"},l.createElement(g.Checkbox,{checked:this.state.options.alwaysShowLinkArea,text:m.default("prototype.alwaysShowLinkArea"),onChange:function(t){e.setState({options:Object.assign(Object.assign({},e.state.options),{alwaysShowLinkArea:t})},(function(){e.changeShareUrl(e.state.options)}))}})),l.createElement("div",{className:"share-label-wrap"},l.createElement(g.Checkbox,{checked:this.state.options.showLinkAreaWhenHovered,text:m.default("prototype.showLinkAreaWhenHovered"),onChange:function(t){e.setState({options:Object.assign(Object.assign({},e.state.options),{showLinkAreaWhenHovered:t})},(function(){e.changeShareUrl(e.state.options)}))}}))),l.createElement("div",{className:"share-label-wrap"},l.createElement(g.Checkbox,{checked:this.state.options.showControllerPanel,text:m.default("prototype.showControllerPanel"),onChange:function(t){e.setState({options:Object.assign(Object.assign({},e.state.options),{showControllerPanel:t})},(function(){e.changeShareUrl(e.state.options)}))}})),l.createElement("div",{className:"password-wrapper"},l.createElement(g.Checkbox,{checked:this.isEnablePassChecked(),disabled:!this.canOperatePass(),text:m.default("preview.enablePass"),onChange:function(t){e.setState({isEnablePass:t}),i(n.appID,t)}}),this.canOperatePass()&&this.isEnablePassChecked()&&l.createElement(g.Input,{width:y.isUS?140:120,placeholder:m.default("preview.inputPass"),maxLength:8,error:c,value:a,onSubmit:function(){return e.handleSetShareLinkPass()},onBlur:function(){return e.handleSetShareLinkPass()},onInput:function(t){s(t.trim()),e.setState({isInputError:""})}}),!this.canOperatePass()&&n.previewNeedPassword&&l.createElement("span",{className:"password-value"},o))))),document.body)}}]),t}(l.Component),P=d.connect((function(e){var t=e.teamInfo,n=e.user,a=e.preview;return{teamID:t.id,roleInTeam:t.roleInTeam,userID:n.user&&n.user.id,userName:n.user&&n.user.name,app:a.app,shareRunID:a.shareRunID,sharePassword:a.sharePassword,isLoadLink:a.isLoadLink,password:a.password}}),(function(e,t){var n=t.moduleID;return{getTeamInfo:function(t){e(w.default.preview.getTeamInfo(t))},getShareRunLink:function(t){e(w.default.preview.getShareRunLink(t,n))},setShareLinkPass:function(t,a){e(w.default.preview.setShareLinkPass(t,a,n))},changePwEnable:function(t,n){e(w.default.preview.changePwEnable(t,n))},changePassword:function(t){e(w.default.preview.changePassword(t))}}}))(c.withRouter(b));t.default=function(e){return l.createElement(v.default.Consumer,null,(function(t){var n=t.showMessage;return l.createElement(P,Object.assign({},e,{showMessage:n}))}))}},2406:function(e,t,n){},2407:function(e,t,n){},2408:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(8),i=n(2339),l=n(42),s=n(661),c=n(655),u=n(52);n(2409);var d=n(18),p=s.default(),f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculatePoint=function(){var e=n.props,t=e.shellRef,a=e.singlePreview,o=n.state,r=o.containerHeight,i=o.containerWidth;if(t){var l=t.current.parentNode.getBoundingClientRect(),s=l.height,c=l.width,u=a?s-65:s;r===u&&i===c||n.setState({containerHeight:u,containerWidth:c})}},n.calculateAutoScreenScale=function(){var e=n.props,t=e.onChangeScale,a=e.appType,o=e.shellRef,r=e.scale,l=e.isLandscape,s=e.mobileType,d=e.size,p=e.singlePreview,f=u.isNormalApp(a)&&s!==c.MOBILE_TYPE_NONE,h=null,g=r;if(o){var m=o.current.parentNode.getBoundingClientRect(),v=m.width,w=m.height,y=p?w-65:w;if(f){if(h=i.default.getShellInfo(s,l)){var b=h,P=b.defaultScreenSize,S=b.shellSize,E=b.screenBounds;g=v/y<S.width/S.height?(v-40)/(S.width*(P.height/E.height)):(y-40)/(S.height*(P.width/E.width))}}else g=(v-40)/d.width}t(g)},n.state={containerHeight:0,containerWidth:0,cursorPressed:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.calculatePoint();var e=this.props,t=e.onMount,n=e.autoScreen,a=e.singlePreview;n?setTimeout(this.calculateAutoScreenScale,0):a||setTimeout(t,0),window.addEventListener("resize",p.call)}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.props,a=n.appType,o=n.autoScreen,r=n.mobileType,i=n.onMount,l=n.isLandscape,s=n.size,d=n.firstLoad,p=!1;(p=u.isNormalApp(a)?r!==c.MOBILE_TYPE_NONE?e.mobileType!==r||e.autoScreen!==o||e.isLandscape!==l:e.mobileType!==r||e.autoScreen!==o||e.size.width!==s.width||e.size.height!==s.height:e.autoScreen!==o||e.size.width!==s.width||e.size.height!==s.height)&&e.autoScreen?setTimeout(this.calculateAutoScreenScale,0):!p||e.autoScreen||d||setTimeout(i,0)}},{key:"componentWillUpdate",value:function(){p.remove(this.calculatePoint)}},{key:"componentDidUpdate",value:function(){p.add(this.calculatePoint)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",p.call)}},{key:"renderMobileShell",value:function(e){var t=this.props,n=t.appType,a=t.mobileType;if(!u.isNormalApp(n)||a===c.MOBILE_TYPE_NONE)return null;if(e){var i=e.shellImage,l={};return l[a.toLowerCase()]=!0,o.createElement("div",{className:r.default("device-box",l),style:{width:"100%",height:"100%",top:0,left:0,position:"absolute"}},o.createElement("img",{src:i,style:{width:"100%",height:"100%",top:0,left:0,position:"absolute",pointerEvents:"none"},draggable:!1}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.size,a=t.scale,s=t.mobileType,p=t.isLandscape,f=t.appType,h=t.shellRef,g=t.needPerspective,m=(t.isShowToolbar,this.state),v=m.containerHeight,w=(m.containerWidth,m.cursorPressed),y=Object.assign({},l.size.scale(n,a)),b=0,P=0,S=y.width,E=y.height,k=u.isNormalApp(f)&&s!==c.MOBILE_TYPE_NONE,I=S,O=E,_=S,L=E,T=null;if(k){if(T=i.default.getShellInfo(s,p)){var x=T,C=x.defaultScreenSize,A=x.shellSize,D=x.screenBounds,N=C.width/D.width*a;b=Math.max(b,Math.ceil(D.left*N)),P=Math.floor(D.top*N),L=Math.ceil(D.height*N),_=Math.round(D.width*N),I=Math.round(A.width*N),O=Math.round(A.height*N)}}else L=O=window.innerHeight;var M={top:P,width:_,height:L},j=0;return k?j=Math.max(20,Math.round((v-O)/2)):(M.height=Math.min(O,E),E<v&&(M.top=Math.round((v-E)/2))),o.createElement("div",{ref:h,style:{width:Math.ceil(I)-2,height:O,marginTop:j},className:r.default("c-device",{mobile:k})},o.createElement("div",{className:r.default("device-screen",{mobile:k,perspective:g,isPressed:w,isFF:d.isFireFox}),onMouseDown:function(t){t.stopPropagation(),e.setState({cursorPressed:!0})},onMouseUp:function(t){t.stopPropagation(),e.setState({cursorPressed:!1})},style:M},this.props.children),this.renderMobileShell(T))}}]),t}(o.Component);f.defaultProps={size:{width:0,height:0},firstLoad:!1,mobileType:null,shellRef:null,isLandscape:!1,scale:1,onMount:null},t.default=f},2409:function(e,t,n){},2410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(0)),o=l(n(5)),r=l(n(8));n(2411);n(48);var i=l(n(6));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.tipContent,n=e.onCloseTip,o=e.className,i=e.show,l=e.tipContentBtn;return a.default.createElement("div",{className:(0,r.default)("loadingTipBox",i?o:"")},t,a.default.createElement("span",{className:"link-a goCourse",onClick:n},l))};s.defaultProps={tipContent:(0,i.default)("socketIO.storyboardUpdate"),tipContentBtn:(0,i.default)("socketIO.clickUpdate"),onCloseTip:null,className:"",show:!1},s.propTypes={tipContent:o.default.string,onCloseTip:o.default.func,className:o.default.string,show:o.default.bool,tipContentBtn:o.default.string},t.default=s},2411:function(e,t,n){},2412:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(122);n(2413);t.default=function(e){var t=e.dataURL,n=o.extname(t),r=o.basename(t,n),i=t.replace(/MBX\/.*$/,"index.html")+"?to="+r;return a.createElement("iframe",{className:"mockplus-preview-iframe",src:i})}},2413:function(e,t,n){},2414:function(e,t,n){},2415:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(214),i=n(89),l=n(2334),s=n(48),c=n(31),u=n(2416),d=n(6),p=n(316),f=n(2335),h=n(660),g=n(35),m=n(215),v=n(216),w=n(2419);n(2428);var y=n(22),b=n(18),P=n(2429),S=0,E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.messageHandled=!1,n.handleMessage=function(e){e.data&&e.data.toggleTree&&(n.messageHandled=!0,n.setState({showPhoneTree:!0}))},n.changeUrlMessage=function(){window.parent&&window.parent.postMessage({event:"URL_CHANGED",payload:window.location.href},"*")},n.getPreviewDataData=function(){var e=n.props,t=(e.loadAppPreviewData,e.loadLocalPreviewData),a=e.selectedPage;t(JSON.parse(window.data.replace("/\n/g","")),a)},n.onTransitionEnd=function(e){if(n.props.preview.panState){if(e)n.handleAnimateEnd();else{var t=n.props,a=t.currentPage,o=t.skipDone,r=a?a._id:null;r&&(o({target:r}),setTimeout(n.doStartAutoSkip,0))}n.setState({animationFlag:null,interactionFlag:null})}},n.overlayToPage=function(e){var t=n.props,a=t.overlayPage,o=t.overlayTo;a?(n.setState({overlayAnimation:a.animate.animation}),setTimeout((function(){n.setState({overlayAnimation:""}),o(e)}),a.animate.duration)):o(e)},n.doStopAutoSkip=function(){n.autoSkipID&&(clearTimeout(n.autoSkipID),n.autoSkipID=void 0)},n.handleAnimateEnd=function(){var e=n.props,t=e.nextPage,a=e.skipDone;n.doPreLoadImage(t._id);var o=t?t._id:null,r=t.animate,i=r.animation,l=r.duration,s=r.action;o&&(s===h.OVERLAY?n.doSkipOrOverlay({target:o,animation:i,duration:l,action:h.OVERLAY,noStyle:!0}):(a({target:o,animation:i}),setTimeout(n.doStartAutoSkip,0)))},n.handleInteractionClick=function(e,t){clearTimeout(S),S=0;var a=n.props,o=a.goBackWard,r=a.goHome;if(n.setState({linkFadeIn:!1}),n.doStopAutoSkip(),t.type!==i.externalLink)if(t.type===i.backLink||t.action===i.backLink)o();else if(t.type===i.homeLink)r();else{var l=t.target,s=t.action,c=t.animation,u=t.duration,d=t.type;n.doSkipOrOverlay({target:l,action:s,animation:c,duration:u,type:d,noStyle:!1})}else{var p=t.target;window.open(p,"_blank")}},n.doSkipOrOverlay=function(e){var t=n.props.skipTo;if(e.action===h.OVERLAY){var a=e.target,o=e.animation,r=e.duration,i=e.action,l=e.noStyle;n.overlayToPage({target:a,animation:o,duration:r,action:i,noStyle:l})}else t(e)},n.handlePageGesture=function(){clearTimeout(S),S=0,n.doPageSkip()},n.handleSkipToPage=function(e){var t=n.props.skipTo;n.doStopAutoSkip(),t({target:e}),setTimeout(n.doStartAutoSkip,0)},n.handleLinkAreaFadeInEnd=function(){n.state.linkFadeIn&&n.setState({linkFadeIn:!1})},n.handleLinkAreaFadeInStart=function(){n.setState({linkFadeIn:!0})},n.handleInteractionPan=function(e,t){var a=n.props.panTo;n.state.interactionFlag||n.setState({interactionFlag:Object.assign(Object.assign({},t),{animate:t.animation})}),a({target:t.target,animation:t.animation,duration:t.duration,gesture:t.gesture,action:t.action,type:t.type},e)},n.handleInteractionPanDone=function(e,t){(0,n.props.panDone)({target:t.target,animation:t.animation,duration:t.duration,gesture:t.gesture,action:t.action,type:t.type},e)},n.handlePagePan=function(e){var t=n.props,a=t.currentPage,o=t.loaded,r=t.panTo;if(o&&a&&a.onLoaded){var i=a.onLoaded;if(!i)return;var l=n.state.interactionFlag||i,s=l.target,c=l.animate,u=l.duration,d=l.gesture,p=l.action;s&&r({target:s,animation:c,duration:u,gesture:d,action:p,type:""},e)}},n.handlePagePanDone=function(e){var t=n.props,a=t.currentPage,o=t.loaded,r=t.panDone;if(o&&a&&a.onLoaded){var i=a.onLoaded;if(!i)return;var l=n.state.interactionFlag||i,s=l.target,c=l.animate,u=l.duration,d=l.gesture,p=l.action;s&&r({target:s,animation:c,duration:u,gesture:d,action:p,type:""},e)}},n.doPreLoadImage=function(e){var t=n.props,a=(t.app,t.preLoad),o=t.interactions,r=t.pages;l.preloadImage(e,r,o,a)},n.doStartAutoSkip=function(){var e=n.props,t=e.currentPage,a=e.nextPage,o=e.loaded,r=e.autoSkipToPage;if(o&&t&&!a){var i=t.onLoaded;if(i&&n.pageWhetherExist(i.target)){var l=t.onLoaded,s=l.delay,c=l.target,u=l.animate,d=l.duration,p=l.gesture,f=l.action;c&&!p&&(n.autoSkipID=window.setTimeout((function(){f===h.OVERLAY?n.overlayToPage({target:c,animation:u,duration:d}):(n.doStopAutoSkip(),r(c,{animation:u,duration:d}))}),s))}}},n.pageWhetherExist=function(e){var t=n.props.app;if(t){var a=t.children;return l.validatePageExist(a,e)}return!1},n.doPageSkip=function(){var e=n.props,t=e.currentPage,a=e.nextPage,o=e.loaded,r=e.pageSkipToPage,i=e.overlayPage;if(o&&t&&!a&&t.onLoaded){var l=(i||t).onLoaded;if(!l)return;var s=l.target,c=l.animate,u=l.duration,d=l.action;s&&(d===h.OVERLAY?n.overlayToPage({target:s,animation:c,duration:u}):(n.doStopAutoSkip(),r(s,{animation:c,duration:u})))}},n.exitPreview=function(){l.isLarkApplets?tt&&tt.miniProgram&&tt.miniProgram.navigateBack&&tt.miniProgram.navigateBack():l.isLarkBrowser?window.h5sdk&&window.h5sdk.ready((function(){window.h5sdk.biz.navigation.close({})})):window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("exit")},n.renderNoPage=function(){var e=n.props,t=e.app,a=e.user,r=e.teamInfo,i=e.getTeamInfo;r.id||i(t.teamID);var c=r.roleInTeam;if(!a.user||!m.validatePermission(m.MODE_STORY_BOARD,m.OPERATE_ADD,c,!1))return o.createElement(u.default,null,o.createElement("div",null,d.default("preview.noPage.notTeamMember"),l.isMobileApp&&o.createElement("button",{className:"idoc-phone-back-button",onClick:n.exitPreview},d.default("activity.back"))));var p="/app/"+t._id+"/storyboard";return o.createElement(u.default,{url:p,onClick:function(){localStorage.removeItem("closeUpLoadTip")}},o.createElement("div",null,d.default("preview.noPage.isTeamMember"),l.isMobileApp?o.createElement("button",{className:"idoc-phone-back-button",onClick:n.exitPreview},d.default("activity.back")):o.createElement(s.Link,{className:"add-page-link",href:p},d.default("preview.noPage.addPage"))))},n.renderError=function(){return o.createElement("div",{className:"preview-error"},o.createElement(w.default,null),o.createElement("p",null,n.props.error.message))},n.isFirstLoaded=!0;window.location.search;return n.state={linkFadeIn:!1,needPerspective:!1,overlayAnimation:"",animationFlag:"",interactionFlag:null,showPhoneTree:!1},n.onMobileToggleTree=n.onMobileToggleTree.bind(n),n.onMobileTouchStart=n.onMobileTouchStart.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.getPreviewDataData(),window.addEventListener("message",this.handleMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage)}},{key:"componentWillReceiveProps",value:function(e){var t=e.app,n=e.nextPage;if(n){var a=n.animate.animation,o=this.state.animationFlag;o||this.setState({animationFlag:a}),"flipInX"===o||"flipOutX"===o?this.setState({needPerspective:!0}):this.setState({needPerspective:!1})}if(t){t.inviteAsCollaborator;if(l.isLarkBrowser&&window.h5sdk){var r=t.name;window.h5sdk.ready((function(){window.h5sdk.biz.navigation.setTitle({title:r})}))}}}},{key:"componentDidUpdate",value:function(e){var t,n,a,o,r,i,l,s;if(this.props.loaded&&(this.isFirstLoaded&&this.doStartAutoSkip(),this.isFirstLoaded=!1,(null===(n=null===(t=this.props)||void 0===t?void 0:t.currentPage)||void 0===n?void 0:n._id)!==(null===(a=e.currentPage)||void 0===a?void 0:a._id)&&(null===(o=e.currentPage)||void 0===o?void 0:o._id))){var c=this.props,u=c.app,d=c.match.params,p=d.module,f=d.prototypeID;u&&("prototype"===p?this.props.redirectTo("/run/"+p+"/"+u.shareID+"/"+f+"/"+(null===(i=null===(r=this.props)||void 0===r?void 0:r.currentPage)||void 0===i?void 0:i._id),this.changeUrlMessage):this.props.redirectTo("/run/"+p+"/"+u.shareID+"/"+(null===(s=null===(l=this.props)||void 0===l?void 0:l.currentPage)||void 0===s?void 0:s._id),this.changeUrlMessage))}}},{key:"onMobileToggleTree",value:function(){if(this.messageHandled)this.messageHandled=!1;else{var e=this.state.showPhoneTree;this.setState({showPhoneTree:!e})}}},{key:"onMobileTouchStart",value:function(){var e=this;return S=window.setTimeout((function(){e.setState({showPhoneTree:!0})}),500),!1}},{key:"onMobileTouchMove",value:function(){return clearTimeout(S),!1}},{key:"onMobileTouchEnd",value:function(){clearTimeout(S),S=0}},{key:"render",value:function(){var e=this,t=this.props,n=t.childNode,a=t.loaded,r=t.currentPage,i=t.error,l=t.mode,s=t.nextPage,c=t.preview,u=t.app,d=t.clear,p=t.skipDone,g=t.redirectTo,m=t.onSelectPage,v=t.loadApp,w=t.panDone,y=t.panTo,b=t.goBackWard,E=t.goHome,k=t.openLarkShareDialog,I=this.state,O=I.linkFadeIn,_=I.needPerspective,L=I.overlayAnimation,T=I.showPhoneTree,x=I.interactionFlag;if(a&&i)return this.renderError();if(a&&!r)return this.renderNoPage();if(!a||!n)return null;var C=n;return o.createElement(f.default.Provider,{value:{onPagePan:function(e){return P.handlePagePan(e,x,r,a,y)},onPagePanDone:function(e){return P.handlePagePanDone(e,x,r,a,w)},onPageGesture:function(){return P.handlePageGesture(S,e.doPageSkip)},pageWhetherExist:function(e){return P.pageWhetherExist(e,u)},onAnimationEnd:function(){P.handleAnimateEnd(e.doSkipOrOverlay,e.doPreLoadImage,s,p,e.doStartAutoSkip,h.OVERLAY)},onTransitionEnd:function(t){P.onTransitionEnd(t,c,e.handleAnimateEnd,r,p,e.doStartAutoSkip,(function(){e.setState({animationFlag:null,interactionFlag:null})}))},onLinkClick:function(t,n){P.handleInteractionClick(t,n,S,b,E,e.doStopAutoSkip,e.doSkipOrOverlay,(function(){e.setState({linkFadeIn:!1})}))},onLinkFadeInEnd:function(){P.handleLinkAreaFadeInEnd(O,(function(){e.setState({linkFadeIn:!1})}))},onLinkPan:function(t,n){P.handleInteractionPan(t,n,y,x,(function(){e.setState({interactionFlag:Object.assign(Object.assign({},n),{animate:n.animation})})}))},onLinkPanDone:function(e,t){P.handleInteractionPanDone(e,t,w)}}},o.createElement(o.Fragment,null,o.createElement(C,Object.assign({},this.props,{linkFadeIn:O,onPageSelected:this.handleSkipToPage,changeUrlMessage:this.changeUrlMessage,onPreLoadImage:this.doPreLoadImage,onLinkAreaFadeInStart:this.handleLinkAreaFadeInStart,onUnmount:d,needPerspective:_,mode:l,redirectTo:g,onSelectPage:m,loadApp:v,overlayAnimation:L,showPhoneTree:T,openLarkShareDialog:function(){u&&u._id&&k(u._id)},onMobileToggleTree:this.onMobileToggleTree,onMobileTouchStart:this.onMobileTouchStart,onMobileTouchMove:this.onMobileTouchMove,onMobileTouchEnd:this.onMobileTouchEnd}))))}}]),t}(o.Component);E.defaultProps={app:null,currentPage:null,nextPage:null,loaded:!1,interactions:null,childNode:null,skipTo:null,skipDone:null,preLoad:null,goBackWard:null,goForWard:null,goHome:null,loadAppPreviewData:null,loadLocalPreviewData:null,autoSkipToPage:null,clear:null,zip:!1};var k=r.connect((function(e,t){var n,a,o,r,i,l,s=e.preview,c=e.user,u=e.teamInfo,d="prototype"===(null===(a=null===(n=null==t?void 0:t.match)||void 0===n?void 0:n.params)||void 0===a?void 0:a.module)?null===(r=null===(o=null==t?void 0:t.match)||void 0===o?void 0:o.params)||void 0===r?void 0:r.pageID:null===(l=null===(i=null==t?void 0:t.match)||void 0===i?void 0:i.params)||void 0===l?void 0:l.prototypeID,p=t.location.state&&t.location.state.isFromApps,f=s.app,h=s.interactions,m=s.currentPage,w=s.nextPage,b=s.loaded,P=s.zip,S=s.error,E=s.overlayPage,k=s.notFromInvitation,I=void 0,O=y.getMode();if(b&&!S){var _=f.homepage,L=void 0;if(m&&(L=m,_=m._id),E&&(L=E,_=E._id),_){var T=g.getFlattenPages(f.children);I=v.getCurrentPageInteractions(h,L,T)}}return{pages:e[O].pages,shareID:t.match.params.shareID,app:f,loaded:b,preview:s,currentPage:m,nextPage:w,overlayPage:E,interactions:I,zip:P,error:S,user:c,teamInfo:u,selectedPage:d,notFromInvitation:k,isFromApps:p,isLarkTeam:u.isLarkTeam}}),(function(e,t){var n=t.match.params,a=n.shareID,o=n.module,r=n.prototypeID,i=t.location.search,l=!!b.GetQueryString("isRedirect",i);return{loadLocalPreviewData:function(t,n){e(c.default.preview.loadLocalPreviewData(t,n))},loadAppPreviewData:function(t){e(c.default.preview.loadPreviewData(a,t,"prototype"===o?r:o,l))},skipTo:function(t){e(c.default.preview.skipTo(t))},skipDone:function(t){e(c.default.preview.skipDone(t))},goHome:function(){e(c.default.preview.goHome())},goBackWard:function(){e(c.default.preview.goBackWard())},goForWard:function(){e(c.default.preview.goForWard())},preLoad:function(t){e(c.default.preview.preLoad(t))},autoSkipToPage:function(t,n){e(c.default.preview.autoSkipToPage(t,n))},pageSkipToPage:function(t,n){e(c.default.preview.pageSkipToPage(t,n))},clear:function(){e(c.default.preview.clear())},onSelectPage:function(t){e(c.default.tree.selectPage(t))},loadApp:function(t,n){e(c.default.app.loadApp(t,n))},overlayTo:function(t){e(c.default.preview.overlayTo(t))},panTo:function(t,n){e(c.default.preview.panTo(t,n))},panDone:function(t,n){e(c.default.preview.panDone(t,n))},goPrevPage:function(){e(c.default.preview.goPrevPage())},goNextPage:function(){e(c.default.preview.goNextPage())},getTeamInfo:function(t){e(c.default.preview.getTeamInfo(t))},register:function(t,n,a){e(c.default.user.register({name:t,email:n,password:a}))},openLarkShareDialog:function(t){e(c.default.share.showShareDialog(t))}}}))(E);t.default=function(e){return o.createElement(p.default.Consumer,null,(function(t){var n=t.redirectTo,a=t.showMessage;return o.createElement(k,Object.assign({},e,{redirectTo:n,showMessage:a}))}))}},2416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2417);n(2418);var r=function(e){var t=e.url,n=e.onClick,r=e.children;return a.createElement("div",{className:"no-page",onClick:n},a.createElement("div",{className:"no-page-icon"},t?a.createElement("a",{href:t},a.createElement("img",{src:o})):a.createElement("img",{src:o}),a.createElement("div",{className:"no-page-msg"},r)))};r.defaultProps={url:"",onClick:null,children:""},t.default=r},2417:function(e,t,n){e.exports=n.p+"assets/no-page.58fbbdb7f8381add6bfb26a5e99b4962.svg"},2418:function(e,t,n){},2419:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(49),i=n(2420),l=n(2421),s=n(2422),c=n(2423),u=n(2424),d=n(2425),p=n(2347),f=n(2426);n(2427);var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getTargetImage=function(){switch(n.props.type){case r.CommonErrorImgTypes.ErrorImg:return i;case r.CommonErrorImgTypes.NoComment:return l;case r.CommonErrorImgTypes.NoDocument:return s;case r.CommonErrorImgTypes.NoDynamic:return c;case r.CommonErrorImgTypes.NoImage:return u;case r.CommonErrorImgTypes.NoPage:return d;case r.CommonErrorImgTypes.NoSearchResult:return p;case r.CommonErrorImgTypes.NoBrowsingHistory:return f;default:return i}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.width,a=e.height;return o.createElement("div",{className:"error-page-wrapper"},o.createElement("img",{src:this.getTargetImage(),alt:"",width:n,height:a}),t&&o.createElement("div",{className:"img-content"},t))}}]),t}(o.Component);h.defaultProps={width:160,height:160,type:r.CommonErrorImgTypes.ErrorImg},t.default=h},2420:function(e,t,n){e.exports=n.p+"assets/error_img.9ca7d825389166658a58726f7d7c8f2d.png"},2421:function(e,t,n){e.exports=n.p+"assets/no_comment.f7a1cd0ef87ab2302b66156ba772a6e2.png"},2422:function(e,t,n){e.exports=n.p+"assets/no_document.2ef54a24d385e2f1dec1f43b0ba01597.png"},2423:function(e,t,n){e.exports=n.p+"assets/no_dynamic.f8b172bfcfd32cea32f8aa4d995435b5.png"},2424:function(e,t,n){e.exports=n.p+"assets/no_image.51f29cbdaefcc7a84f3ac93fc96ff8de.png"},2425:function(e,t,n){e.exports=n.p+"assets/no_page.d363b436fadbe687e7b738e20a7729f5.png"},2426:function(e,t,n){e.exports=n.p+"assets/no_browsing_history.3e25363b426d6f2d2abcf2a7db0f9b5f.png"},2427:function(e,t,n){},2428:function(e,t,n){},2429:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleInteractionPanDone=t.handleInteractionPan=t.handleLinkAreaFadeInEnd=t.handleInteractionClick=t.onTransitionEnd=t.handleAnimateEnd=t.pageWhetherExist=t.handlePageGesture=t.handlePagePanDone=t.handlePagePan=void 0;var a=n(89),o=n(2334);t.handlePagePan=function(e,t,n,a,o){if(a&&n&&n.onLoaded){var r=n.onLoaded;if(!r)return;var i=t||r,l=i.target,s=i.animate,c=i.duration,u=i.gesture,d=i.action;l&&o({target:l,animation:s,duration:c,gesture:u,action:d,type:""},e)}},t.handlePagePanDone=function(e,t,n,a,o){if(a&&n&&n.onLoaded){var r=n.onLoaded;if(!r)return;var i=t||r,l=i.target,s=i.animate,c=i.duration,u=i.gesture,d=i.action;l&&o({target:l,animation:s,duration:c,gesture:u,action:d,type:""},e)}},t.handlePageGesture=function(e,t){clearTimeout(e),e=0,t()},t.pageWhetherExist=function(e,t){if(t){var n=t.children;return o.validatePageExist(n,e)}return!1},t.handleAnimateEnd=function(e,t,n,a,o,r){t(n._id);var i=n?n._id:null,l=n.animate,s=l.animation,c=l.duration,u=l.action;i&&(u===r?e({target:i,animation:s,duration:c,action:r,noStyle:!0}):(a({target:i,animation:s}),setTimeout(o,0)))},t.onTransitionEnd=function(e,t,n,a,o,r,i){if(t.panState){if(e)n();else{var l=a?a._id:null;l&&(o({target:l}),setTimeout(r,0))}i()}},t.handleInteractionClick=function(e,t,n,o,r,i,l,s){if(clearTimeout(n),n=0,s(),i(),t.type!==a.externalLink)if(t.type===a.backLink||t.action===a.backLink)o();else if(t.type===a.homeLink)r();else{l({target:t.target,action:t.action,animation:t.animation,duration:t.duration,type:t.type,noStyle:!1})}else{var c=t.target;window.open(c,"_blank")}},t.handleLinkAreaFadeInEnd=function(e,t){e&&t()},t.handleInteractionPan=function(e,t,n,a,o){a||o(),n({target:t.target,animation:t.animation,duration:t.duration,gesture:t.gesture,action:t.action,type:t.type},e)},t.handleInteractionPanDone=function(e,t,n){n({target:t.target,animation:t.animation,duration:t.duration,gesture:t.gesture,action:t.action,type:t.type},e)}}}]);